(function(e){function t(t){for(var r,o,i=t[0],l=t[1],c=t[2],u=0,m=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},s={app:0},n=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0762":function(e,t,a){},1405:function(e,t,a){},"1ba9":function(e,t,a){"use strict";a("3905")},2169:function(e,t,a){"use strict";a("8d0e")},"266d":function(e,t,a){e.exports=a.p+"img/image1-0.d1704cb0.png"},"2a59":function(e,t,a){e.exports=a.p+"img/image1-2.933b8e0e.png"},3310:function(e,t,a){},"336e":function(e,t,a){e.exports=a.p+"img/image1-1.aa462bd5.png"},"34ae":function(e,t,a){"use strict";a("8385")},3905:function(e,t,a){},"39d2":function(e,t,a){"use strict";a("3aa1")},"3aa1":function(e,t,a){},"3e30":function(e,t,a){},"3f91":function(e,t,a){},4477:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var r=a("2b0e"),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},n=[],o=(a("6e3e"),a("2877")),i={},l=Object(o["a"])(i,s,n,!1,null,null,null),c=l.exports,d=a("9483");Object(d["a"])("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var u=a("8c4f"),m=function(){var e=this,t=e._self._c;return t("div",[e.islock?t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"店小秘",name:"first"}},[t("Sys4Home")],1)],1):t("Lock",{on:{login:e.login}})],1)},p=[],b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"box"},[t("div",{staticClass:"btns-main"},[t("span",{staticClass:"margin-ri"},[e._v("订单总条数："+e._s(e.orderAllNum)+";")]),t("span",{staticClass:"margin-ri"},[e._v("衣服总件数："+e._s(e.goodsAllNum))])]),t("div",{staticClass:"btns"},e._l(e.downBtn,(function(a,r){var s;return t("span",{key:a.key,staticClass:"btns-item"},[t("span",{staticClass:"num margin-bot-4"},[e._v("订单个数："+e._s(e.orderArrsDatas&&(null===(s=e.orderArrsDatas[a.id])||void 0===s?void 0:s.length)||0))]),t("span",{staticClass:"mar-bot"},[t("download-excel",{ref:"download-img"+r,refInFor:!0,class:["export-img"],attrs:{data:e.imgExportData[a.id]||[],name:e.fileName+"图片-"+a.value+e.timer+".xls"}},[e._v("img")])],1),t("span",{staticClass:"margin-bot-4"},[t("download-excel",{ref:"download"+r,refInFor:!0,class:["export",a.class],attrs:{data:e.specExportData[a.id]||[],name:e.fileName+a.value+"-"+e.timer+".xls"}},[e._v(" "+e._s(a.value)+" ")])],1),t("div",{staticClass:"mar-bot0"},[t("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:e.allIndex[a.id],callback:function(t){e.$set(e.allIndex,a.id,t)},expression:"allIndex[item.id]"}})],1)])})),0),t("p",{staticClass:"box-info"},[t("span",{staticClass:"zonglan"},[t("el-button",{attrs:{type:"info"},on:{click:e.exportOrder}},[e._v("全部单号汇总")]),t("el-button",{staticClass:"all-btn",attrs:{type:"success"},on:{click:e.handleBox}},[e._v("条件汇总")])],1),t("span",[t("span",{staticClass:"api-text"},[e._v("name：")]),t("span",{staticClass:"input-span"},[t("el-input",{attrs:{size:"small",placeholder:"请输入文件名"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1)]),e.isOrderPage?e._e():t("router-link",{attrs:{to:"order?type=2",target:"_blank"}},[e._v("旧版规格")]),e.isOrderPage?e._e():t("router-link",{attrs:{to:"order?type=1",target:"_blank"}},[e._v("其他店")])],1)]),t("div",{staticClass:"form"},[t("Empty",{ref:"empty",on:{save:e.save,scrollTop:e.scrollTop}})],1),t("Box",{attrs:{dialogVisible:e.boxVisible},on:{onOk:function(t){e.boxVisible=!1},onCancel:function(t){e.boxVisible=!1}}})],1)},g=[],h=function(){var e=this,t=e._self._c;return t("el-form",{ref:"formData",staticClass:"demo-dynamic",attrs:{model:e.formData,"label-width":"100px"}},[t("div",{staticClass:"block-btn"},[t("div",{staticClass:"txtz"},[t("div",{staticStyle:{"margin-bottom":"6px"}},[t("span",{staticClass:"api-text"},[e._v("A-")]),t("span",[e._v("get_package_list")])]),t("div",[t("span",{staticClass:"api-text"},[e._v("Aa-")]),t("span",[e._v("get_shipment_order_list_by_order_ids_multi_shop")])])]),t("el-button",{staticClass:"maring-ri-16 main-btn",attrs:{type:"danger"},on:{click:function(t){return e.submitForm("formData")}}},[e._v("转化数据")]),t("el-button",{staticClass:"maring-ri-16",attrs:{type:"primary"},on:{click:e.addNextPage}},[e._v("新增下一页")]),t("el-button",{on:{click:function(t){return e.resetForm("formData")}}},[e._v("清空全部数据")])],1),t("div",{staticClass:"content"},e._l(e.formData.group,(function(a,r){return t("div",{key:r,staticClass:"block-row maring-bot-16"},[t("el-form-item",{staticClass:"parent-item",attrs:{label:"Aa",prop:`group.${r}.parent`,rules:[{required:!0,message:`请输入第${e.page_number}页的父`}]}},[t("el-input",{attrs:{type:"textarea",rows:2},model:{value:a.parent,callback:function(t){e.$set(a,"parent",t)},expression:"group.parent"}})],1),e._l(a.childs,(function(a,s){return t("el-form-item",{key:a.key,attrs:{label:"Ba"+(s+1),prop:"group."+r+".childs."+s+".value",rules:{required:!1,message:"Ba不能为空",trigger:"blur"}}},[t("div",{staticClass:"item"},[t("el-input",{staticClass:"maring-ri-16 pointer",attrs:{rows:3,type:"textarea"},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"child.value"}}),t("el-button",{on:{click:function(t){return t.preventDefault(),e.removeChild(r,a)}}},[e._v("删除这条")])],1)])})),t("el-form-item",{staticClass:"btns-item"},[e._v(" 第 "),t("span",{staticClass:"block-row-page"},[e._v(e._s(r+1))]),e._v(" 页数据： "),t("el-button",{staticClass:"maring-ri-16",attrs:{size:"medium",type:"warning"},on:{click:function(t){return e.addChild(r)}}},[e._v("新增一条Ba")]),t("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return t.preventDefault(),e.clearCurPage(r)}}},[e._v("清空这页数据")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){return t.preventDefault(),e.removeOnePage(r)}}},[e._v("删除这页数据")]),t("span",{staticClass:"child-num"},[e._v("已录Ba数："+e._s(a.childs.length))])],1)],2)})),0)])},f=[],y=(a("14d9"),a("2ef0"));const _=[{value:"",key:Date.now()+1},{value:"",key:Date.now()+2},{value:"",key:Date.now()+3},{value:"",key:Date.now()+4},{value:"",key:Date.now()+5},{value:"",key:Date.now()+6},{value:"",key:Date.now()+7},{value:"",key:Date.now()+8}];var v={data(){return{page_number:1,formData:{group:[{parent:"",childs:Object(y["cloneDeep"])(_)}]}}},methods:{addNextPage(){this.$emit("scrollTop"),this.formData.group.push({parent:"",childs:Object(y["cloneDeep"])(_),key:Date.now()})},removeOnePage(e){const{group:t}=this.formData;t.splice(e,1)},clearCurPage(e){const{group:t}=this.formData;t[e].parent="",t[e].childs=[]},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{const e=this.getLastOrderNum()||"";this.$emit("save",{data:JSON.parse(JSON.stringify(this.formData)),lastOrderNum:e})}})},resetForm(e){window.__shop_save_datas={fileName:"",timer:"",dataSource:[],allOrder_sn:[]},this.$refs[e].resetFields()},removeChild(e,t){const{group:a}=this.formData;var r=a[e].childs.indexOf(t);-1!==r&&a[e].childs.splice(r,1)},addChild(e){const{group:t}=this.formData,a=t[e].childs.length;a>7&&alert("一页最多8个Ba，小心仔细检查是否录重复页了"),t[e].childs.push({value:"",key:Date.now()})},getLastOrderNum(){const e=this.page_number-1,t=this.getGroup(e),a=Object(y["get"])(t,"data.package_list"),r=a.length,s=a[r-1],n=Object(y["get"])(s,"order_sn");return n},getGroup(e){const{group:t}=this.formData,a=t[e].parent,r=JSON.parse(a);return r}}},x=v,S=(a("9e78"),Object(o["a"])(x,h,f,!1,null,"7826a09c",null)),D=S.exports;const O=[{id:"spec007",key:"sameBuyer",value:"同个买家下多个单",class:"export-extra"},{id:"specCancel",key:"cancelOrder",value:"申请取消的单"},{id:"spec009",key:"priceOut",value:"大于R$230的单"}],C=[{id:"spec000",key:"sem nome e número",value:"不定制"},{id:"spec001",key:"sem nome e número(copa patch)",value:"不定制+补丁"},{id:"spec002",key:"10#NEYMAR JR",value:"球星号"},{id:"spec003",key:"10#NEYMAR JR(copa patch)",value:"球星号+补丁"},{id:"spec004",key:"Com nome e número",value:"定制名称号码"},{id:"spec005",key:"Com nome e número(copa patch)",value:"定制名称号码+补丁"},{id:"spec0012",key:"Nome+número",value:"旧：定制名字+号码",class:"export-extra"}],k=[{id:"spec008",key:"otherOrder",value:"人工审核单",class:"export-extra"},...O],w=[...C,...k],A=[{id:"spec0011",key:"Sem nome",value:"没有名字"},{id:"spec0012",key:"Nome+número",value:"名字+号码"},{id:"spec0013",key:"Não nome",value:"没名字+号码"}],E=[...A,...k],z=[{id:"spec000",key:"sem nome e número",value:"不定制的单"},{id:"spec111",key:"qiuxinghaoOrder",value:"球星号+补丁"},{id:"spec222",key:"nameNumOrder",value:"姓名+号码+补丁"}],j=[...z,...k],N=["S","M","L","XL","XXL","12","14","16","18","20","22","24","26","28"],$=[...N],I=()=>{const e=window.location.href,t=e.indexOf("type=1"),a=e.indexOf("type=2");let r="",s=[];return t>0?(s=A,r="order"):a>0?(s=C,r="old"):(s=z,r="new"),{which_spec:s,curPage:r}},L=()=>{const e=new Date;let t=e.getMonth()+1+"月"+e.getDate()+"日"+e.getHours()+"时"+e.getMinutes()+"分";return t},R=()=>{const e=new Date,t=e.getMonth()+1,a=t<10?"0"+t:t;let r=e.getFullYear()+"-"+a+"-"+e.getDate();return r},T=(e,t)=>{const a=[];return e.map(e=>{e[t]&&a.push(e[t])}),a},B=()=>{const e="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0");return e},P=e=>{const t=e.item_model.name,a=t.split(","),r={spec:a[0]};return a.length>1&&(r.size=a[1]),r},U=e=>{const t=e.split(","),a={spec:t[0]};return t.length>1&&(a.size=t[1]),a},J=e=>{if(!e)return"没码数";let t=[];const a=e.indexOf("="),r=e.indexOf("（"),s=e.indexOf("(");return t=-1!==a?e.split("="):-1!==r?e.split("（"):-1!==s?e.split("("):e.split(),t[0]},X=I();let M=X.curPage,F=X.which_spec;const H=230,K=(e,t="orders")=>{let a=[];return e.map(e=>{const r=e.data[t];a=a.concat(r)}),a},V=({userBuyMore:e,userBuyOnce:t,item:a,obj:r})=>{const s=Object(y["find"])(t,["user_id",a.user_id]);if(s){e.push(r);const s=Object(y["findIndex"])(t,["user_id",a.user_id]);e.push(t[s]),t.splice(s,1)}else t.push(r);return{userBuyOnce:t,userBuyMore:e}},q=(e,t,a)=>{const r=Object(y["findIndex"])(F,["key",t]);if(-1!==r){const t=F[r].id;e[t].push(a)}else e["spec008"].push(a)},Z=(e,t,a)=>{if("sem nome e número(copa patch)"===t||"Sem nome número(copa patch)"===t||"10#NEYMAR JR"===t||"10#NEYMAR JR(copa patch)"===t)e["spec111"].push(a);else if("Com nome e número"===t||"Com nome e número(copa patch)"===t||"Nome+número"===t||"Com nome número(copa patch)"===t||"Sem nome e número+Brasileirão"===t||"Sem nome e número+Libertadores"===t||"Com nome e número+Brasileirão"===t||"Com nome e número+Libertadores"===t)e["spec222"].push(a);else{const r=Object(y["findIndex"])(F,["key",t]);if(-1!==r){const t=F[r].id;e[t].push(a)}else e["spec008"].push(a)}},G=(e,t)=>{const a=Object(y["uniq"])(e);console.log(t,"---datas");const r=[];return a.map(e=>{t.map(t=>{e===t.buyer_user.user_id&&(console.log(t.buyer_user.user_id),r.push(t))})}),r},W=({item:e,specArrsDatas:t})=>{const{order_items:a,order_sn:r}=e;let s=!0,n="";for(let o=0;o<a.length;o++){const{bundle_deal_model:e,item_list:t}=a[o];if(t.length>0)for(let a=0;a<t.length;a++){const t=U(e[a].name),r=t.spec;if(n){if(n!==r){s=!1;break}}else n=r}else{const e=P(a[o]).spec;if(n){if(n!==e){s=!1;break}}else n=e}if(!1===s)break}s?"new"===M?Z(t,n,e):q(t,n,e):t["spec008"].push(e)},Y=window.location.href,Q=Y.indexOf("type=1"),ee=Y.indexOf("type=2"),te=Q>0?E:ee>0?w:j;let ae=[],re=[],se=[],ne=[],oe=[],ie=[],le=[],ce=[],de=[],ue={};const me=()=>{te.map(e=>{ue[""+e.id]=[]})},pe=()=>{ae=[],se=[],re=[],ne=[],oe=[],ie=[],le=[],de=[],ce=[],ue={},me()},be=e=>{ae=Object(y["cloneDeep"])(e);let t=[],a=[];e.map(e=>{const r=JSON.parse(e.parent);t.push(r),e.childs.map(e=>{a.push(JSON.parse(e.value))})});const r=K(t,"package_list"),s=K(a,"orders");re=Object(y["uniqBy"])(r,"order_sn"),se=Object(y["uniqBy"])(s,"order_sn")},ge=e=>{e.map(e=>{const t={parcel_price:e.parcel_price,order_sn:e.order_sn,user_id:e.user_id};parseFloat(e.parcel_price)>H?ne.push(t):oe.push(t);V({userBuyMore:le,userBuyOnce:ie,obj:t,item:e})}),ce=T(ie,"user_id"),de=T(le,"user_id")},he=(e,t)=>{const a=[];e.map(e=>{a.push(e.order_sn);const r=Object(y["findIndex"])(t,["order_sn",e.order_sn]);-1!==r&&(t[r].user_id=Object(y["get"])(e,"buyer_user.user_id"))}),window["__shop_save_datas"]={allOrder_sn:a},ge(re)},fe=e=>{he(e,re);const t=[];e.map(e=>{const a=Object(y["findIndex"])(ne,["order_sn",e.order_sn]),r=Object(y["findIndex"])(le,["order_sn",e.order_sn]);-1!==a?ue["spec009"].push(e):16===e.status_ext?ue["specCancel"].push(e):-1!==r?t.push(e):W({item:e,specArrsDatas:ue})}),ue["spec007"]=G(de,t),console.log(ue,"=======源数据规格转化完成数据")},ye=({arrs:e})=>{pe(),be(e),fe(se);const t=Object(y["cloneDeep"])(ue);return t},_e="<table>\n<tr >\n    <td></td>\n    </table>",ve='<table  align="center" >\n<colgroup>\n    <col span="1"style="">\n  </colgroup>\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n</table>'+_e,xe=e=>{const t=R();return`<table border="1"  align="center" >\n    <colgroup>\n        <col span="1"style="">\n      </colgroup>\n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"  style="color:#fd0004;font-size: 72px;">${e}</td>\n    </tr>\n    <tr align="center">\n        <td>买家（${t}）</td>\n    </tr>\n    <tr align="center">\n        <td  >名字</td>\n    </tr>\n    <tr align="center">\n        <td>号码</td>\n    </tr>\n    <tr align="center">\n        <td>规格</td>\n    </tr>\n    <tr align="center">\n        <td>尺寸</td>\n    </tr>\n    <tr align="center">\n        <td>订单号</td>\n    </tr>\n    <tr align="center">\n    <td>备注</td>\n</tr>\n</table>`},Se=({img:e,spec:t,business:a,buyName:r,number:s,sizeAndNum:n,order_sn:o,bgColor:i})=>`<table border="1"  align="center"  bgcolor="#e5e9f2">\n        <colgroup>\n            <col span="1"style="">\n          </colgroup>\n        <tr align="center" valign="center">\n            <td  height=200 width=200 align="center" valign="center"> <img src="${e}" height="100" /></td>\n        </tr>\n       \n        <tr align="center">\n            <td  style="background-color:${i}">${a}</td>\n        </tr>\n        <tr align="center">\n            <td  >${r}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:green">${s}</td>\n        </tr>\n        <tr align="center">\n            <td >${t}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:red">${n}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:blue">${o}</td>\n        </tr>\n        <tr align="center">\n        <td></td>\n    </tr>\n    </table>`,De=({img:e,specStr:t})=>`<table border="1"  align="center" bgcolor="#e5e9f2">  \n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"> <img src="${e}" width="100" height="100" /></td>\n    </tr>\n    <tr align="center">\n        <td width="200">${t}</td>\n    </tr>       \n</table>`,Oe='<table  align="center" >\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n</table>'+_e,Ce=e=>{const t=Ae(e),a=we(t),r=ke(a);return r},ke=e=>{const t=Object(y["chunk"])(e,4),a=[];return t.map(e=>{let t={};e.map((e,a)=>{t["picture-picture-picture"+a]=De(e),t[`empty${a}-`]=Oe}),a.push(t)}),a},we=e=>{const t=e.map(e=>{const{specNum:t}=e,a=Object(y["cloneDeep"])(t);let r=[];return $.map((e,t)=>{a.map((t,s)=>{const n=J(t.size);n===e&&(r.push(t),a.splice(s,1))})}),r=r.concat(a),e._specNum=r,e});return console.log(t,"---排序后"),t.map(e=>{const t=Object(y["map"])(e._specNum,"size_num_str").join("/");return{...e,specStr:t}})},Ae=e=>{const t=[];return e.map(e=>{const a=e.imgId,r=Object(y["findIndex"])(t,["imgId",a]),s=e.sizeAndNum;if(-1===r){const e=ze(s,1),r={imgId:a,img:`https://s-cf-br.shopeesz.com/file/${a}_tn`,specNum:[e]};t.push(r)}else Ee(t[r],s)}),t},Ee=(e,t)=>{const{specNum:a}=e,r=Object(y["findIndex"])(a,["size",t]);if(-1===r){const e=ze(t,1);a.push(e)}else{const e=a[r].num+1;a[r].num=e,a[r].size_num_str=t+e}},ze=(e,t)=>({size:e,num:1,size_num_str:e+t}),je=({arrDatas:e,key:t,defineIndex:a})=>{const r=$e(e,t),s=Ne(r.arr,a),n=Ce(r.arr);return{defineIndex:s.defineIndex,tableArrs:s.arr,goodsImgNum:r.goodsImgNum,imgExportData:n}},Ne=(e,t)=>{const a=Object(y["chunk"])(e,4),r=[];return a.map((e,a)=>{let s={left:xe(t)};e.map((e,t)=>{s["data"+t]=Se(e),s[`empty${t}-`]=ve}),r.push(s),t++}),{arr:r,defineIndex:t}},$e=(e,t)=>{let a=0;const r=[];return null===e||void 0===e||e.map(e=>{const{order_items:s,order_sn:n,buyer_user:o}=e;let i={bgColor:"",business:""};e.order_items.length>1&&(i.bgColor=B(),i.business=o.user_name),"spec007"===t&&(i.bgColor=Re(o),i.business=o.user_name),s.map((e,s)=>{const{item_list:l}=e;if(0===l.length){const t=P(e);for(let s=0;s<e.amount;s++){const s=e.product.images[0],o={...i,order_sn:n,img:`https://s-cf-br.shopeesz.com/file/${s}_tn`,imgId:s,spec:t.spec,sizeAndNum:""+t.size,buyName:"",number:""};r.push(o),a++}}else{const{bundle_deal_model:s,bundle_deal_product:c}=e;i.bgColor||(i.bgColor=B()),i.business||(i.business=o.user_name),"spec007"===t&&(i.bgColor=Re(o),i.business=o.user_name),l.map((e,t)=>{const o=U(s[t].name),l=c[t].images[0];for(let s=0;s<e.amount;s++){const e={...i,order_sn:n,img:`https://s-cf-br.shopeesz.com/file/${l}_tn`,imgId:l,spec:o.spec,sizeAndNum:""+o.size,buyName:"",number:""};r.push(e),a++}})}})}),{arr:r,goodsImgNum:a}};let Ie="",Le="";const Re=e=>(e.user_id!==Ie&&(Le=B(),Ie=e.user_id),Le);var Te=a("21a6"),Be=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"close-on-click-modal":!0,title:"按照选中的条件转化数据==>下载",visible:e.dialogVisible,width:"400px",top:"28vh","before-close":e.onCancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),t("div",{staticStyle:{"margin-bottom":"10px"}}),t("el-checkbox-group",{on:{change:e.handleChange},model:{value:e.checkedIds,callback:function(t){e.checkedIds=t},expression:"checkedIds"}},e._l(e.datas,(function(a){return t("el-checkbox",{key:a.id,attrs:{label:a.id}},[e._v(e._s(a.value))])})),1),t("div",{staticClass:"main-btn"},[t("el-input",{staticStyle:{width:"60px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:e.orderInx,callback:function(t){e.orderInx=t},expression:"orderInx"}}),t("el-button",{staticClass:"main-btn1",attrs:{type:"danger"},on:{click:e.onOk}},[e._v("开始转化")])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"order-sn",attrs:{size:"small",type:"info"},on:{click:e.exportSn}},[e._v("单号汇总")]),t("download-excel",{ref:"download-img",class:["export-img img"],attrs:{data:e.imgExportData||[],name:e.imgExportName}},[e._v("下载img ")]),t("download-excel",{ref:"download",class:["export-img doOrder"],attrs:{data:e.specExportData||[],name:e.specExportName}},[e._v(" 下载做单 ")])],1)],1)},Pe=[];const Ue=()=>{const{allOrder_sn:e}=window.__shop_save_datas||{};if(e)return Je(e)},Je=e=>{const t=Object(y["chunk"])(e,4);let a="";return t.map(e=>{a=a+e.join(" ")+"\r\n"}),a},Xe=e=>e?null===e||void 0===e?void 0:e.map(e=>e.order_sn):[],Me=Object(y["cloneDeep"])(j),Fe=Me.map(e=>e.id),He=Object(y["cloneDeep"])(Fe);He.pop();const Ke=He;var Ve={props:["dialogVisible"],data(){return{checkAll:!1,checkedIds:Ke,datas:Me,isIndeterminate:!0,name:"汇总",imgExportData:[],imgExportName:"",specExportData:[],specExportName:"",snExportData:"",orderInx:1}},computed:{},methods:{handleCheckAll(e){this.checkedIds=e?Fe:[],this.isIndeterminate=!1},handleChange(e){let t=e.length;this.checkAll=t===this.datas.length,this.isIndeterminate=t>0&&t<this.datas.length},onCancel(){this.checkAll=!1,this.checkedIds=Ke,this.datas=Me,this.isIndeterminate=!0,this.imgExportData=[],this.imgExportName="",this.specExportData=[],this.specExportName="",this.snExportData="",this.orderInx=1,this.$emit("onCancel",{})},onOk(){const{dataSource:e={},fileName:t,timer:a}=window.__shop_save_datas||{};e&&e.spec000?(this.exportImg({dataSource:e,fileName:t,timer:a}),this.setSnData({dataSource:e,fileName:t,timer:a}),this.exportDoSn({dataSource:e,fileName:t,timer:a}),this.$message({message:"汇总数据转化成功，快去下载",showClose:!0,type:"success",duration:800,offset:10})):this.$message({message:"请先转化数据",showClose:!0,type:"error",duration:800,offset:10})},exportDoSn({dataSource:e,fileName:t,timer:a}){this.specExportName=`${t||""}${this.name}做单-${a}.xls`;const r=[];this.checkedIds.map(t=>{const a=$e(e[t],t);r.push(...a.arr)}),console.log(r,"---做单的数据");const s=Ne(r,this.orderInx);this.specExportData=null===s||void 0===s?void 0:s.arr},exportImg({dataSource:e,fileName:t,timer:a}){const r=[];this.checkedIds.map(t=>{const a=$e(e[t],t);r.push(...a.arr)}),this.imgExportData=Ce(r),this.imgExportName=`${t||""}${this.name}报货-${a}.xls`},setSnData({dataSource:e,fileName:t,timer:a}){const r=[];this.checkedIds.map(t=>{const a=Xe(e[t]);r.push(...a)}),this.snExportData=Je(r)},exportSn(){if(!this.snExportData)return;const{fileName:e,timer:t}=window.__shop_save_datas||{},a=new Blob([this.snExportData],{type:"text/plain;charset=utf-8"}),r=`${e||""}${this.name}单号-${t}.txt`;Object(Te["saveAs"])(a,""+r)}}},qe=Ve,Ze=(a("fcc0"),Object(o["a"])(qe,Be,Pe,!1,null,"ad65bc64",null)),Ge=Ze.exports,We={name:"Main",components:{Empty:D,Box:Ge},data:()=>({orderArrsDatas:{},orderAllNum:0,goodsAllNum:0,fileName:"",allIndex:{},allExportDatas:{},specExportData:{},imgExportData:{},downBtn:[],timer:"",dataScreen:{exportData:[],fields:{}},lastOrderNum:"",isOrderPage:null,boxVisible:!1}),beforeMount(){this.downBtn=[],this.$route.query&&1==this.$route.query.type?(this.isOrderPage=!0,this.downBtn=E):this.$route.query&&2==this.$route.query.type?(this.isOrderPage=!0,this.downBtn=w):(this.isOrderPage=!1,this.downBtn=j)},mounted(){this.initDataScreenFields()},methods:{save({data:e,lastOrderNum:t}){this.lastOrderNum=t;const{group:a}=e,r=ye({arrs:a});this.orderArrsDatas=Object(y["cloneDeep"])(r),this.setExcelTable(r),this.timer=L(),window.__shop_save_datas={...window.__shop_save_datas,fileName:this.fileName,timer:this.timer,dataSource:JSON.parse(JSON.stringify({...this.orderArrsDatas}))}},setExcelTable(e){let t=0,a=0;this.specExportData=e;for(const r in e)if(a+=e[r].length,e[r].length>0){const a=je({arrDatas:e[r],key:r,defineIndex:this.allIndex[r]});this.specExportData[r]=a.tableArrs,console.log(a,"====imgExportData"),this.imgExportData[r]=a.imgExportData,this.allExportDatas[r]=a,t+=a.goodsImgNum}this.goodsAllNum=t,this.orderAllNum=a,this.$message({message:"数据转化成功，快去下载",showClose:!0,type:"success",duration:800,offset:10}),this.createExportDataScreen()},createExportDataScreen(){const e={};for(const a in this.allExportDatas)e[a]="订单数"+this.orderArrsDatas[a].length+" / 结束索引"+(this.allExportDatas[a].defineIndex-1);const t={orderAllNum:this.orderAllNum,goodsAllNum:this.goodsAllNum,lastOrderNum:this.lastOrderNum,fileName:this.fileName+"xx"+this.timer,...e};this.dataScreen.exportData=[t]},initDataScreenFields(){const e={"订单总条数":"orderAllNum","衣服总件数":"goodsAllNum","最后一条订单单号":"lastOrderNum"};this.downBtn.map(t=>{e[t.value]=t.id,this.$set(this.allIndex,[t.id],1)}),this.dataScreen.fields=e},scrollTop(){document.documentElement.scrollTop=document.body.scrollHeight},exportOrder(){const{allOrder_sn:e}=window.__shop_save_datas||{};if(e){const t=Ue(e),a=new Blob([t],{type:"text/plain;charset=utf-8"}),r=`${this.fileName||""}汇总全部单号-${this.timer}.txt`;Object(Te["saveAs"])(a,""+r),this.$message({message:"单号汇总，下载成功～",showClose:!0,type:"success",duration:800,offset:10})}else this.$message({message:"请先转化数据",showClose:!0,type:"error",duration:800,offset:10})},handleBox(){this.boxVisible=!0}}},Ye=We,Qe=(a("5a1a"),Object(o["a"])(Ye,b,g,!1,null,"61096860",null)),et=Qe.exports,tt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("p",{staticClass:"title"},[e._v("开心快乐飞起~")]),t("span",{staticClass:"psw"},[t("label",{staticClass:"psw-label",attrs:{for:"登录密码"}},[e._v("登录密码:")]),t("el-input",{attrs:{placeholder:"请输入登录密码","show-password":""},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)},at=[],rt={name:"Lock",data:()=>({input:"",islock:sessionStorage.getItem("isShopLock")}),methods:{login(){"admins6868"===this.input?(this.islock=!0,sessionStorage.setItem("isShopLock",!0),this.$message({message:"登录成功",type:"success",showClose:!0,duration:1e3}),this.$emit("login",!0)):this.$message({message:"密码错误",type:"error",showClose:!0,duration:1e3})}}},st=rt,nt=(a("da7c"),Object(o["a"])(st,tt,at,!1,null,"084aef88",null)),ot=nt.exports,it=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sys2-box"},[t("Config",{attrs:{dialogVisible:e.configVisible},on:{onOk:function(t){e.configVisible=!1},onCancel:e.confCancle}}),t("el-button",{staticClass:"conf-btn",on:{click:function(t){e.configVisible=!0}}},[e._v("规格金额配置")]),t("el-button",{staticClass:"empt-btn",attrs:{type:"warning"},on:{click:e.empty}},[e._v("清空全部")]),t("Upload",{ref:"unploadRef",on:{onOk:e.getData}}),t("Goods",{ref:"goodsRef",attrs:{_EXPORT_DATAS:e.completeDataSource}})],1)},lt=[],ct=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"box-card"},[t("el-upload",{attrs:{action:"#","auto-upload":!1,"on-change":e.onChange,"on-remove":e.handleRemove,"file-list":e.fileList,multiple:"",accept:".xls,.xlsx"}},[e._v(" 第一步： "),t("el-button",{attrs:{type:"primary"}},[e._v("选择文件")])],1),t("div",{staticClass:"exp"},[e._v(" 第二步： "),t("el-button",{staticStyle:{width:"60%"},attrs:{type:"danger"},on:{click:e.submit}},[e._v("（选择文件"+e._s(e.fileList.length||0)+"个）-----导入-----（导入成功"+e._s(e.dataSource.length)+"个）")])],1)],1)},dt=[];a("13d5");const ut={"订单号":"orderCode","订单金额":"amount","产品规格":"spec","商品尺寸":"size","产品数量":"number","图片网址":"imgUrl","买家账号":"buyerAccount","店铺账号":"storeName"},mt=[{value:"sem nome e número",label:"没有姓名和号码"},{value:"sem nome e número+Brasileirão",label:"没有姓名和号码+Brasileirão"},{value:"sem nome e número+Libertadores",label:"没有名字和号码+解放者"},{value:"sem nome e número(UCL Patch)",label:"没有姓名和号码（UCL 补丁）"},{value:"sem nome e número(SERIE A)",label:"无姓名和编号（A 系列）"},{value:"sem nome e número(LIGUE Patch)",label:"没有姓名和号码（CALL 补丁）"},{value:"sem nome e número(EPL Patch)",label:"没有姓名和号码（EPL 补丁）"},{value:"sem nome e número(Laliga Patch)",label:"没有姓名和号码（Laliga 补丁）"},{value:"Com nome e número",label:"有名字和号码"},{value:"Com nome e número+Brasileirão",label:"带有姓名和号码+Brasileirão"},{value:"Com nome e número+Libertadores",label:"yy有姓名和号码+解放者队yy"},{value:"Com nome e número(UCL Patch)",label:"有姓名和号码（UCL 补丁）"},{value:"Com nome e número(SERIE A)",label:"带有姓名和号码（A 系列）"},{value:"Com nome e número(LIGUE Patch)",label:"带姓名和号码（CALL 补丁）"},{value:"Com nome e número(EPL Patch)",label:"带姓名和号码（EPL 补丁）"},{value:"Com nome e número(Laliga Patch)",label:"带有姓名和号码（Laliga 补丁）"}],pt="230",bt=e=>e.map(e=>e.value),gt=[{value:"sys2-sameBuyer",label:"同个买家下多个单",valKey:"_sameBuyerDataSource"},{value:"sys2-money",label:"大于R$230的单",valKey:"_more230DataSource"},{value:"sys2-examine",label:"人工审核",valKey:"_examineDataSource"},{value:"sys2-noCustomized",specs:bt(mt.slice(0,8)),label:"不定制",valKey:"_nocustomizedDataSource"},{value:"sys2-customized",specs:bt(mt.slice(8)),label:"定制",valKey:"_customizedDataSource"}],ht=e=>{if(!e)return"没码数";let t=[];const a=e.indexOf("="),r=e.indexOf("（"),s=e.indexOf("(");return t=-1!==a?e.split("="):-1!==r?e.split("（"):-1!==s?e.split("("):e.split(),t[0]},ft=()=>{const e="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0");return e},yt=e=>e.map(e=>{const t={};for(const a in e){const r=e[a],s=ut[a];let n=[];"产品规格"===a?(n=r.split(","),t["spec"]=n[0],t["size"]=ht(n[1])):s&&(t[s]=r)}return t}),_t=e=>{const t=Object(y["cloneDeep"])(e),a=[],r=[];t.map(e=>{const t=a.indexOf(e.orderCode),s=[],n=ft();for(let a=0;a<e.number;a++)s.push({textColor:n,spec:e.spec,size:e.size,number:1,imgUrl:e.imgUrl,orderCode:e.orderCode,buyerAccount:e.buyerAccount,storeName:e.storeName});if(-1===t){a.push(e.orderCode);const t={orderCode:e.orderCode,amount:e.amount,buyerAccount:e.buyerAccount};r.push({...t,goodsList:s})}else{let e=r[t].goodsList.concat(s);e=e.map(e=>({...e,textColor:n})),r[t].goodsList=e}});const s={flatDataSource:t,orderDataSource:r,allOrderCodes:a};return s},vt=a("25ca");var xt={data(){return{fileList:[],dataSource:[]}},methods:{handleRemove(e,t){this.fileList=t},onChange(e,t){this.fileList=t},empty(){this.fileList=[],this.dataSource=[]},async submit(){this.dataSource=[],await this.fileList.map(e=>{this.readerFiles(e)}),setTimeout(()=>{this.getFlatDataSource()},500)},async readerFiles(e){let t=await new Promise(t=>{let a=new FileReader;a.readAsBinaryString(e.raw),a.onload=e=>{t(e.target.result)}}),a=vt.read(t,{type:"binary",cellDates:!0}),r=a.Sheets[a.SheetNames[0]];this.getHeaderRow(r);const s=vt.utils.sheet_to_json(r);this.dataSource.push(s)},getHeaderRow(e){const t=[],a=vt.utils.decode_range(e["!ref"]);let r;const s=a.s.r;for(r=a.s.c;r<=a.e.c;++r){const a=e[vt.utils.encode_cell({c:r,r:s})];let n="UNKNOWN "+r;a&&a.t&&(n=vt.utils.format_cell(a)),t.push(n)}return t},setOneArrFormat(){const e=this.dataSource.reduce((e,t)=>e.concat(t),[]);return e},getFlatDataSource(){if(0===this.dataSource.length)return void this.$message.error("请先导入数据");const e=this.setOneArrFormat(),t=yt(e),a=_t(t);return this.$emit("onOk",a),a}}},St=xt,Dt=(a("7cee"),Object(o["a"])(St,ct,dt,!1,null,"12f3dc7b",null)),Ot=Dt.exports,Ct=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"main-btn"},[e._v(" 第三步："),t("el-button",{staticClass:"main-btn1",attrs:{type:"success"},on:{click:e.onOk}},[e._v("导出excel")])],1),t("el-divider"),e._v(" 第四步： "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"order-sn",attrs:{size:"small",type:"info"},on:{click:e.exportSn}},[t("i",{staticClass:"el-icon-download"}),e._v("单号汇总")]),t("download-excel",{ref:"download-img",class:["export-img img"],attrs:{data:e.imgExport.data||[],name:e.imgExport.name}},[t("i",{staticClass:"el-icon-download"}),e._v("下载img ")]),e._l(e.downBtns,(function(a){return t("span",{key:a.value},[t("download-excel",{ref:"download",refInFor:!0,class:["export-img doOrder"],attrs:{data:e.orderExportObj[a.valKey]||[],name:`${e.fileName}做单--${a.label}-${e.timer}.xlsx`}},[t("i",{staticClass:"el-icon-download"}),e._v(" "+e._s(a.label)+" "),e._EXPORT_DATAS.doOrdersDataSource?t("span",[e._v(" （"+e._s(e._EXPORT_DATAS.doOrdersDataSource[a.valKey].length>0?"有":"无")+"） ")]):e._e()])],1)}))],2),t("div",{staticClass:"zdy-ipt"},[e._v(" 下载文件名: "),t("el-input",{staticStyle:{width:"240px","margin-right":"16px"},attrs:{size:"small",placeholder:"下载文件名"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),e._v(" excel的索引： "),t("el-input",{staticStyle:{width:"60px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:e.startIndex,callback:function(t){e.startIndex=t},expression:"startIndex"}})],1)],1)},kt=[];const wt=e=>{const t=Object(y["chunk"])(e,4);let a="";return t.map(e=>{a=a+e.join(" ")+"\r\n"}),a},At=()=>{const e=new Date,t=e.getMonth()+1,a=t<10?"0"+t:t;let r=e.getFullYear()+"-"+a+"-"+e.getDate();return r},Et="<table>\n<tr >\n    <td></td>\n    </table>",zt=({img:e,specStr:t})=>`<table border="1"  align="center" bgcolor="#e5e9f2">  \n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"> <img src="${e}" width="100" height="100" /></td>\n    </tr>\n    <tr align="center">\n        <td width="200">${t}</td>\n    </tr>       \n</table>`,jt='<table  align="center" >\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n</table>'+Et,Nt='<table  align="center" >\n<colgroup>\n    <col span="1"style="">\n  </colgroup>\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n</table>'+Et,$t=e=>{const t=At();return`<table border="1"  align="center" >\n    <colgroup>\n        <col span="1"style="">\n      </colgroup>\n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"  style="color:#fd0004;font-size: 72px;">${e}</td>\n    </tr>\n    <tr align="center">\n        <td>店名（${t}）</td>\n    </tr>\n    <tr align="center">\n        <td>买家</td>\n    </tr>\n    <tr align="center">\n        <td  >名字</td>\n    </tr>\n    <tr align="center">\n        <td>号码</td>\n    </tr>\n    <tr align="center">\n        <td>规格</td>\n    </tr>\n    <tr align="center">\n        <td>尺寸</td>\n    </tr>\n    <tr align="center">\n        <td>订单号</td>\n    </tr>\n    <tr align="center">\n    <td>备注</td>\n</tr>\n</table>`},It=({textColor:e,img:t,DZbuyName:a,DZnumber:r,business:s,storeName:n,spec:o,size:i,order_sn:l,sBuyColor:c=""})=>`<table border="1"  align="center"  bgcolor="#e5e9f2">\n        <colgroup>\n            <col span="1"style="">\n          </colgroup>\n        <tr align="center" valign="center">\n            <td  height=200 width=200 align="center" valign="center"> <img src="${t}" height="100" /></td>\n        </tr>\n        <tr align="center">\n            <td  >${n}</td>\n        </tr>\n        <tr align="center">\n            <td  style="background-color:${c||e}">${s}</td>\n        </tr>\n        <tr align="center">\n            <td  >${a}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:green">${r}</td>\n        </tr>\n        <tr align="center">\n            <td >${o}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:red">${i}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:${c?e:"blue"}">${l}</td>\n        </tr>\n        <tr align="center">\n        <td></td>\n    </tr>\n    </table>`,Lt=e=>{const t=Pt(e),a=Object(y["flatten"])(Bt(t)),r=Rt(a);return r},Rt=e=>{const t=Object(y["chunk"])(e,4),a=[];return t.map(e=>{let t={};e.map((e,a)=>{const r=Object(y["map"])(e.sizeNum,"size_num_str").join("/");t["picture-picture-picture"+a]=zt({img:e.imgUrl,specStr:r}),t[`empty${a}-`]=jt}),a.push(t)}),a},Tt=["S","M","L","XL","XXL","XXXL","12","14","16","18","20","22","24","26","28","30"],Bt=e=>e.map(e=>{const t=e.sizeNum.sort((e,t)=>Tt.indexOf(e.size)-Tt.indexOf(t.size));return{imgUrl:e.imgUrl,sizeNum:t}}),Pt=e=>{const t=[];return e.map(e=>{const a=e.imgUrl,r=Object(y["findIndex"])(t,["imgUrl",a]),s=e.size,n=e.number;if(-1===r){const e=Jt(s,n),r={imgUrl:a,sizeNum:[e]};t.push(r)}else Ut(t[r],{size:s,number:n})}),t},Ut=(e,{size:t,number:a})=>{const r=Object(y["findIndex"])(e.sizeNum,["size",t]);if(-1===r){const r=Jt(t,a);e.sizeNum.push(r)}else e.sizeNum[r].number+=a,e.sizeNum[r].size_num_str=t+e.sizeNum[r].number},Jt=(e,t)=>({size:e,number:t,size_num_str:e+t}),Xt=(e,t="1")=>{const{_sameBuyerDataSource:a,_more230DataSource:r,_customizedDataSource:s,_nocustomizedDataSource:n,_examineDataSource:o}=e,i={_sameBuyerDataSource:Ft(Mt(a),t),_more230DataSource:Ft(Mt(r),t),_customizedDataSource:Ft(Mt(s),t),_nocustomizedDataSource:Ft(Mt(n),t),_examineDataSource:Ft(Mt(o),t)};return i},Mt=e=>{const t=e.map(e=>e.goodsList);return Object(y["flatten"])(t)},Ft=(e,t)=>{const a=Object(y["chunk"])(e,4),r=[];return a.map((e,a)=>{let s={left:$t(t)};e.map((e,t)=>{s["data"+t]=It({textColor:e.textColor,img:e.imgUrl,DZbuyName:"",DZnumber:"",business:e.buyerAccount,spec:e.spec,size:e.size,order_sn:e.orderCode,sBuyColor:e.sBuyColor||"",storeName:e.storeName}),s[`empty${t}-`]=Nt}),r.push(s),t++}),r},Ht=JSON.parse(window.localStorage.getItem("__sys2-base")),Kt=Object(y["cloneDeep"])(null===Ht||void 0===Ht?void 0:Ht.btns),Vt=null===Kt||void 0===Kt?void 0:Kt.map(e=>e.value),qt=Object(y["cloneDeep"])(Vt),Zt=qt;var Gt={props:{_EXPORT_DATAS:{type:Object,default:()=>{}}},data(){return{downBtns:Ht.btns,checkAll:!1,checkedIds:Zt,fileName:"",timer:"",startIndex:"1",imgExport:{data:[],name:""},orderExport:{data:[],name:""},orderExportObj:{}}},computed:{},methods:{onOk(){this._EXPORT_DATAS.allOrderCodes?(this.timer=At(),this.exportImg(this._EXPORT_DATAS.flatDataSource),this.exportOrders(this._EXPORT_DATAS.doOrdersDataSource),this.$message.success("导出成功，快去下载")):this.$message.error("请先导入数据")},exportOrders(){this.orderExportObj=Xt(this._EXPORT_DATAS.doOrdersDataSource,this.startIndex)},exportImg(){this.imgExport.data=Lt(this._EXPORT_DATAS.flatDataSource),this.imgExport.name=`${this.fileName||""}报货-${this.timer}.xlsx`},exportSn(){if(!this._EXPORT_DATAS.allOrderCodes)return;const e=wt(this._EXPORT_DATAS.allOrderCodes),t=new Blob([e],{type:"text/plain;charset=utf-8"}),a=`${this.fileName||""}单号-${this.timer}.txt`;Object(Te["saveAs"])(t,""+a)},handleCheckAll(e){this.checkedIds=e?Vt:[],this.isIndeterminate=!1},handleChange(e){let t=e.length;this.checkAll=t===this.datas.length,this.isIndeterminate=t>0&&t<this.datas.length},empty(){this.orderExportObj={},this.orderExport.data=[],this.orderExport.name="",this.imgExport.data=[],this.imgExport.name=""}}},Wt=Gt,Yt=(a("e52a"),Object(o["a"])(Wt,Ct,kt,!1,null,"da9dd33c",null)),Qt=Yt.exports,ea=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisible,title:"配置信息",width:"70%",height:"500px","before-close":e.onCancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-tabs",{staticClass:"demo-dynamic",attrs:{value:"customized"},on:{"tab-click":e.handleClick}},[t("el-tab-pane",{attrs:{label:"金额",name:"priceLimit"}},[t("el-form",{ref:"formData",attrs:{model:e.formData}},[t("el-form-item",{attrs:{prop:"money",rules:[{required:!0,message:"不能为空保存",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"设置超过多少钱拿出这个单"},model:{value:e.formData.money,callback:function(t){e.$set(e.formData,"money",t)},expression:"formData.money"}})],1)],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveMoney("formData")}}},[e._v("保存")])],1),t("el-tab-pane",{attrs:{label:`定制（${e.formData.dzSpec.length}）`,name:"customized"}},[t("SpecTable",{attrs:{data:e.formData.dzSpec},on:{submit:e.customizedSubmit}})],1),t("el-tab-pane",{attrs:{label:`不定制（${e.formData.ndzSpec.length}）`,name:"noCustomized"}},[t("SpecTable",{attrs:{data:e.formData.ndzSpec},on:{submit:e.noCustomizedSubmit}})],1),t("el-tab-pane",{attrs:{label:"规格",name:"btns"}},e._l(e.formData.btns,(function(a){return t("div",{key:a.value},[t("p",[e._v(e._s(a.label))])])})),0)],1)],1)},ta=[],aa=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"400"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t("el-table-column",{attrs:{prop:"value",label:"英文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入英文规格"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.value))])]}}])}),t("el-table-column",{attrs:{prop:"label",label:"中文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入中文规格"},model:{value:a.row.label,callback:function(t){e.$set(a.row,"label",t)},expression:"scope.row.label"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.label))])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isEdit?a.row.isEdit?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!1)}}},[e._v("完成")]):e._e():t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!0)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.del(a)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"add-list"},[t("el-button",{attrs:{type:"info",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增")]),t("el-button",{staticStyle:{"margin-left":"20%"},attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1)],1)},ra=[],sa={props:["data"],watch:{data:{handler:"initData",immediate:!0}},data(){return{tableData:[]}},methods:{initData(e){this.tableData=e},submit(){const e=this.tableData.map(e=>{if(!Object(y["isEmpty"])(e.label)||!Object(y["isEmpty"])(e.value))return{label:e.label.trim(),value:e.value.trim()};this.$message.error("规则信息不能为空!")});console.log(e,"--_tableData"),this.$emit("submit",e)},add(){this.defaultState(),this.tableData.push({label:"",value:"",isEdit:!0}),setTimeout(()=>{this.$refs.table.bodyWrapper.scrollTop=9999},500)},edit(e,t){this.defaultState(),this.$set(this.tableData,e.$index,{...e.row,isEdit:t})},del(e){this.tableData.splice(e.$index,1)},defaultState(){this.tableData=this.tableData.map(e=>({...e,isEdit:!1}))}}},na=sa,oa=(a("1ba9"),Object(o["a"])(na,aa,ra,!1,null,"3bc5e7fe",null)),ia=oa.exports;const la=JSON.parse(window.localStorage.getItem("__sys2-base"))||{};console.log(Object(y["isEmpty"])(la)?gt:la.btns,44454);var ca={components:{SpecTable:ia},props:["dialogVisible"],data(){return{formData:{ndzSpec:Object(y["isEmpty"])(la)?mt.slice(0,8):la.ndzSpec,dzSpec:Object(y["isEmpty"])(la)?mt.slice(8):la.dzSpec,money:Object(y["isEmpty"])(la)?pt:la.money,btns:Object(y["isEmpty"])(la)?gt:la.btns}}},methods:{handleClick(e,t){},onCancel(){this.$emit("onCancel")},customizedSubmit(e){console.log("查看定制规则======",e),this.formData.dzSpec=e,this.specLocalData()},noCustomizedSubmit(e){console.log("查看不定制规则======",e),this.formData.ndzSpec=e,this.specLocalData()},saveMoney(e){this.$refs[e].validate(e=>{if(e){const e=Object(y["findIndex"])(gt,["value","sys2-money"]);this.formData.btns[e].label=`大于R$${this.formData.money}的单`,window.localStorage.setItem("__sys2-base",JSON.stringify(this.formData)),this.$message.success("配置成功")}})},specLocalData(){const e=Object(y["findIndex"])(gt,["value","sys2-customized"]);this.formData.btns[e].specs=this.getKeys(this.formData.dzSpec);const t=Object(y["findIndex"])(gt,["value","sys2-noCustomized"]);this.formData.btns[t].specs=this.getKeys(this.formData.ndzSpec),window.localStorage.setItem("__sys2-base",JSON.stringify(this.formData)),this.$message.success("配置成功")},getKeys(e){return e.map(e=>e.value)}}},da=ca,ua=(a("5e98"),Object(o["a"])(da,ea,ta,!1,null,"24ae3de0",null)),ma=ua.exports;const pa=JSON.parse(window.localStorage.getItem("__sys2-base")),ba=null===pa||void 0===pa?void 0:pa.btns,ga=({orderDataSource:e})=>{const t=[],a=[],r=[],s=[],n=[];return e.map(e=>{const o=ft(),i=t.indexOf(e.buyerAccount);-1===i?(t.push(e.buyerAccount),r.push(e.orderCode)):(a.push(e.buyerAccount),s.push(r[i]),s.push(e.orderCode),n.push({code:r[i],sBuyColor:o}),n.push({code:e.orderCode,sBuyColor:o}),t.splice(i,1),r.splice(i,1))}),{moreCodesAndColor:Object(y["uniqBy"])(n,"code"),buyMoreOrderCodes:Object(y["uniq"])(s)}},ha=({orderDataSource:e})=>{const t=pa.money||"170",a=[],r=[];return e.map(e=>{parseFloat(e.amount)>parseFloat(t)?r.push(e.orderCode):a.push(e.orderCode)}),{less230OrderCodes:Object(y["uniq"])(a),more230OrderCodes:Object(y["uniq"])(r)}},fa=({orderDataSource:e})=>{const t=_a({key:"sys2-customized",orderDataSource:e});return{custOrderCodes:Object(y["uniq"])(t)}},ya=({orderDataSource:e})=>{const t=_a({key:"sys2-noCustomized",orderDataSource:e});return{noCustOrderCodes:Object(y["uniq"])(t)}},_a=({key:e,orderDataSource:t})=>{const a=Object(y["find"])(ba,["value",e]),r=a.specs,s=[];return t.map(e=>{const t=Object(y["map"])(e.goodsList,"spec"),a=Object(y["uniq"])(t),n=Object(y["some"])(r,e=>Object(y["includes"])(a,e));n&&s.push(e.orderCode)}),s},va=(JSON.parse(window.localStorage.getItem("__sys2-base")),e=>{const t=Object(y["cloneDeep"])(e),{moreCodesAndColor:a}=ga({orderDataSource:t.orderDataSource}),r=Sa({codeColorArrs:a,_DATA_OBJ:t}),{more230OrderCodes:s}=ha({orderDataSource:t.orderDataSource}),n=xa({codeArrs:s,_DATA_OBJ:t}),{custOrderCodes:o}=fa({orderDataSource:t.orderDataSource}),i=xa({codeArrs:o,_DATA_OBJ:t}),{noCustOrderCodes:l}=ya({orderDataSource:t.orderDataSource}),c=xa({codeArrs:l,_DATA_OBJ:t}),d=t.orderDataSource,u={doOrdersDataSource:{_sameBuyerDataSource:r,_more230DataSource:n,_customizedDataSource:i,_nocustomizedDataSource:c,_examineDataSource:d},flatDataSource:t.flatDataSource,allOrderCodes:t.allOrderCodes};return u}),xa=({codeArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(y["findIndex"])(t.orderDataSource,["orderCode",e]);-1!==r&&(a.push(t.orderDataSource[r]),t.orderDataSource.splice(r,1))}),a},Sa=({codeColorArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(y["findIndex"])(t.orderDataSource,["orderCode",e.code]);if(-1!==r){const s=t.orderDataSource[r];s.goodsList=s.goodsList.map(t=>({...t,sBuyColor:e.sBuyColor})),a.push(s),t.orderDataSource.splice(r,1)}}),a},Da=JSON.parse(window.localStorage.getItem("__sys2-base"))||{};var Oa={name:"Home",components:{Upload:Ot,Goods:Qt,Config:ma},mounted(){},data:()=>({configVisible:!!Object(y["isEmpty"])(Da),completeDataSource:{}}),methods:{getData(e){this.completeDataSource=va(e),this.$message({message:"汇总导入成功，快去下载",showClose:!0,type:"success",duration:1500,offset:10}),console.log(this.completeDataSource,"转的数据")},empty(){this.$refs.unploadRef.empty(),this.completeDataSource={},this.$refs.goodsRef.empty()},confCancle(){this.configVisible=!1,window.location.reload()}}},Ca=Oa,ka=(a("e488"),Object(o["a"])(Ca,it,lt,!1,null,"7b3d6ed3",null)),wa=(ka.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"sys3-box"},[t("Config",{attrs:{dialogVisible:e.configVisible},on:{onOk:function(t){e.configVisible=!1},onCancel:e.confCancle}}),t("el-button",{staticClass:"conf-btn",on:{click:function(t){e.configVisible=!0}}},[e._v("规格金额配置")]),t("el-button",{staticClass:"empt-btn",attrs:{type:"warning"},on:{click:e.empty}},[e._v("清空全部")]),t("Upload",{ref:"unploadRef",on:{onOk:e.getData}}),t("Goods",{ref:"goodsRef",attrs:{_EXPORT_DATAS:e.completeDataSource}})],1)}),Aa=[],Ea=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"box-card"},[t("el-upload",{attrs:{action:"#","auto-upload":!1,"on-change":e.onChange,"on-remove":e.handleRemove,"file-list":e.fileList,multiple:"",accept:".xls,.xlsx"}},[e._v(" 第一步： "),t("el-button",{attrs:{type:"primary"}},[e._v("选择文件")])],1),t("div",{staticClass:"exp"},[e._v(" 第二步： "),t("el-button",{staticStyle:{width:"60%"},attrs:{type:"danger"},on:{click:e.submit}},[e._v("（选择文件"+e._s(e.fileList.length||0)+"个）-----导入-----（导入成功"+e._s(e.dataSource.length)+"个）")])],1)],1)},za=[];const ja={"订单号":"orderCode","产品规格":"spec","商品尺寸":"size","产品数量":"number","图片网址":"imgUrl","订单备注":"orderRemark","买家账号":"buyerAccount","买家Email":"buyerEmail","买家留言":"buyerLiuyan"},Na=[{value:"Other(Add In The Instruction)",label:"定制名称和号码"},{value:"With name and number",label:"定制名称和号码"},{value:"Badges and custom information:Euro 2024 badges",label:"单补丁"}],$a=[{value:"No",label:"不定制"},{value:"no",label:"不定制"},{value:"",label:"不定制"}],Ia="230",La=e=>e.map(e=>e.value),Ra=[{value:"sys3-sameBuyer",label:"同个买家下多个单",valKey:"_sameBuyerDataSource"},{value:"sys3-noCustomized",specs:La($a),label:"不定制",valKey:"_nocustomizedDataSource"},{value:"sys3-customized_default",specs:[],label:"默认定制",valKey:"_customizedDataSource_default"},{value:"sys3-examine_hasRemark",specs:La(Na),label:"定制：有备注",valKey:"_examineDataSource_hasRemark"},{value:"sys3-examine",label:"人工审核",valKey:"_examineDataSource"}],Ta=e=>{if(!e)return"没码数";let t=[];const a=e.indexOf(":"),r=e.indexOf("："),s=e.indexOf("="),n=e.indexOf("（"),o=e.indexOf("(");return t=-1!==a?e.split(":"):-1!==r?e.split("："):-1!==s?e.split("="):-1!==n?e.split("（"):-1!==o?e.split("("):e.split(),t[1]},Ba=()=>{const e="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0");return e},Pa=e=>e.map(e=>{const t={};for(const a in e){const r=e[a],s=ja[a];let n=[];if("产品规格"===a)if(-1===r.indexOf("Size"))t["size"]=null,t["spec"]=r;else{n=r.split("Custom Items"),t["size"]=Ta(n[0]);const e=n[1];t["spec"]=e?e.replace(":",""):""}else s&&(t[s]=r)}return t}),Ua=e=>{const t=Object(y["cloneDeep"])(e),a=[],r=[];t.map(e=>{const t=a.indexOf(e.orderCode),s=[],n=Ba();for(let a=0;a<e.number;a++)s.push({textColor:n,spec:e.spec,size:e.size,number:1,imgUrl:e.imgUrl,orderCode:e.orderCode,buyerAccount:e.buyerAccount,buyerEmail:e.buyerEmail,buyerLiuyan:e.buyerLiuyan,orderRemark:e.orderRemark});if(-1===t){a.push(e.orderCode);const t={orderCode:e.orderCode,amount:e.amount,buyerAccount:e.buyerAccount,orderRemark:e.orderRemark};r.push({...t,goodsList:s})}else{let e=r[t].goodsList.concat(s);e=e.map(e=>({...e,textColor:n})),r[t].goodsList=e}});const s={flatDataSource:t,orderDataSource:r,allOrderCodes:a};return s},Ja=a("25ca");var Xa={data(){return{fileList:[],dataSource:[]}},methods:{handleRemove(e,t){this.fileList=t},onChange(e,t){this.fileList=t},empty(){this.fileList=[],this.dataSource=[]},async submit(){this.dataSource=[],await this.fileList.map(e=>{this.readerFiles(e)}),setTimeout(()=>{this.getFlatDataSource()},500)},async readerFiles(e){let t=await new Promise(t=>{let a=new FileReader;a.readAsBinaryString(e.raw),a.onload=e=>{t(e.target.result)}}),a=Ja.read(t,{type:"binary",cellDates:!0}),r=a.Sheets[a.SheetNames[0]];this.getHeaderRow(r);const s=Ja.utils.sheet_to_json(r);this.dataSource.push(s)},getHeaderRow(e){const t=[],a=Ja.utils.decode_range(e["!ref"]);let r;const s=a.s.r;for(r=a.s.c;r<=a.e.c;++r){const a=e[Ja.utils.encode_cell({c:r,r:s})];let n="UNKNOWN "+r;a&&a.t&&(n=Ja.utils.format_cell(a)),t.push(n)}return t},setOneArrFormat(){const e=this.dataSource.reduce((e,t)=>e.concat(t),[]);return e},getFlatDataSource(){if(0===this.dataSource.length)return void this.$message.error("请先导入数据");const e=this.setOneArrFormat(),t=Pa(e),a=Ua(t);return this.$emit("onOk",a),a}}},Ma=Xa,Fa=(a("5e03"),Object(o["a"])(Ma,Ea,za,!1,null,"512e97da",null)),Ha=Fa.exports,Ka=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"main-btn"},[e._v(" 第三步："),t("el-button",{staticClass:"main-btn1",attrs:{type:"success"},on:{click:e.onOk}},[e._v("导出excel")])],1),t("el-divider"),e._v(" 第四步： "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"order-sn",attrs:{size:"small",type:"info"},on:{click:e.exportSn}},[t("i",{staticClass:"el-icon-download"}),e._v("单号汇总")]),t("download-excel",{ref:"download-img",class:["export-img img"],attrs:{data:e.imgExport.data||[],name:e.imgExport.name}},[t("i",{staticClass:"el-icon-download"}),e._v("下载img ")]),e._l(e.downBtns,(function(a){return t("span",{key:a.value},[t("download-excel",{ref:"download",refInFor:!0,class:["export-img doOrder"],attrs:{data:e.orderExportObj[a.valKey]||[],name:`${e.fileName}做单--${a.label}-${e.timer}.xlsx`}},[t("i",{staticClass:"el-icon-download"}),e._v(" "+e._s(a.label)+" "),e._EXPORT_DATAS.doOrdersDataSource?t("span",[e._v(" （"+e._s(e._EXPORT_DATAS.doOrdersDataSource[a.valKey].length>0?"有":"无")+"） ")]):e._e()])],1)}))],2),t("div",{staticClass:"zdy-ipt"},[e._v(" 下载文件名: "),t("el-input",{staticStyle:{width:"240px","margin-right":"16px"},attrs:{size:"small",placeholder:"下载文件名"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),e._v(" excel的索引： "),t("el-input",{staticStyle:{width:"60px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:e.startIndex,callback:function(t){e.startIndex=t},expression:"startIndex"}})],1)],1)},Va=[];const qa=e=>{const t=Object(y["chunk"])(e,4);let a="";return t.map(e=>{a=a+e.join(" ")+"\r\n"}),a},Za=()=>{const e=new Date,t=e.getMonth()+1,a=t<10?"0"+t:t;let r=e.getFullYear()+"-"+a+"-"+e.getDate();return r},Ga="<table>\n<tr >\n    <td></td>\n    </table>",Wa=({img:e,specStr:t})=>`<table border="1"  align="center" bgcolor="#e5e9f2">  \n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"> <img src="https:${e}" width="100" height="100" /></td>\n    </tr>\n    <tr align="center">\n        <td width="200">${t}</td>\n    </tr>       \n</table>`,Ya='<table  align="center" >\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n</table>'+Ga,Qa='<table  align="center" >\n<colgroup>\n    <col span="1"style="">\n  </colgroup>\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n</table>'+Ga,er=e=>{const t=Za();return`<table border="1"  align="center" >\n    <colgroup>\n        <col span="1"style="">\n      </colgroup>\n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"  style="color:#fd0004;font-size: 72px;">${e}</td>\n    </tr>\n    <tr align="center">\n        <td>买家邮箱（${t}）</td>\n    </tr>\n    <tr align="center">\n        <td>买家</td>\n    </tr>\n    <tr align="center">\n        <td  >名字</td>\n    </tr>\n    <tr align="center">\n        <td>号码</td>\n    </tr>\n    <tr align="center">\n        <td>规格</td>\n    </tr>\n    <tr align="center">\n        <td>尺寸</td>\n    </tr>\n    <tr align="center">\n        <td>订单号</td>\n    </tr>\n    <tr align="center">\n    <td>订单备注</td>\n</tr>\n</table>`},tr=({textColor:e,img:t,DZbuyName:a,DZnumber:r,business:s,buyerEmail:n,spec:o,size:i,order_sn:l,orderRemark:c,sBuyColor:d=""})=>`<table border="1"  align="center"  bgcolor="#e5e9f2">\n        <colgroup>\n            <col span="1"style="">\n          </colgroup>\n        <tr align="center" valign="center">\n            <td  height=200 width=200 align="center" valign="center"> <img src="https:${t}" height="100" /></td>\n        </tr>\n        <tr align="center">\n            <td  >${n}</td>\n        </tr>\n        <tr align="center">\n            <td  style="background-color:${d||e}">${s}</td>\n        </tr>\n        <tr align="center">\n            <td  >${a}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:green">${r}</td>\n        </tr>\n        <tr align="center">\n            <td >${o}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:red">${i}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:${d?e:"blue"}">${"&nbsp;"+l}</td>\n        </tr>\n        <tr align="center">\n        <td>${c}</td>\n    </tr>\n    </table>`,ar=e=>{const t=or(e),a=Object(y["flatten"])(nr(t)),r=rr(a);return r},rr=e=>{const t=Object(y["chunk"])(e,4),a=[];return t.map(e=>{let t={};e.map((e,a)=>{const r=Object(y["map"])(e.sizeNum,"size_num_str").join("/");t["picture-picture-picture"+a]=Wa({img:e.imgUrl,specStr:r}),t[`empty${a}-`]=Ya}),a.push(t)}),a},sr=["S","M","L","XL","XXL","XXXL","12","14","16","18","20","22","24","26","28","30"],nr=e=>e.map(e=>{const t=e.sizeNum.sort((e,t)=>sr.indexOf(e.size)-sr.indexOf(t.size));return{imgUrl:e.imgUrl,sizeNum:t}}),or=e=>{const t=[];return e.map(e=>{const a=e.imgUrl,r=Object(y["findIndex"])(t,["imgUrl",a]),s=e.size,n=e.number;if(-1===r){const e=lr(s,n),r={imgUrl:a,sizeNum:[e]};t.push(r)}else ir(t[r],{size:s,number:n})}),t},ir=(e,{size:t,number:a})=>{const r=Object(y["findIndex"])(e.sizeNum,["size",t]);if(-1===r){const r=lr(t,a);e.sizeNum.push(r)}else e.sizeNum[r].number+=a,e.sizeNum[r].size_num_str=t+e.sizeNum[r].number},lr=(e,t)=>({size:e,number:t,size_num_str:e+t}),cr=(e,t="1")=>{const{_sameBuyerDataSource:a,_more230DataSource:r,_customizedDataSource_default:s,_nocustomizedDataSource:n,_examineDataSource_hasRemark:o,_examineDataSource:i}=e,l={_sameBuyerDataSource:ur(dr(a),t),_more230DataSource:ur(dr(r),t),_nocustomizedDataSource:ur(dr(n),t),_customizedDataSource_default:ur(dr(s),t),_examineDataSource_hasRemark:ur(dr(o),t),_examineDataSource:ur(dr(i),t)};return l},dr=e=>{const t=null===e||void 0===e?void 0:e.map(e=>e.goodsList);return Object(y["flatten"])(t)},ur=(e,t)=>{const a=Object(y["chunk"])(e,4),r=[];return a.map((e,a)=>{let s={left:er(t)};e.map((e,t)=>{s["data"+t]=tr({textColor:e.textColor,img:e.imgUrl,DZbuyName:"",DZnumber:"",business:e.buyerAccount,spec:e.spec,size:e.size,order_sn:e.orderCode,sBuyColor:e.sBuyColor||"",buyerEmail:e.buyerEmail,orderRemark:e.orderRemark}),s[`empty${t}-`]=Qa}),r.push(s),t++}),r},mr=JSON.parse(window.localStorage.getItem("__sys3-base")),pr=Object(y["cloneDeep"])(null===mr||void 0===mr?void 0:mr.btns),br=null===pr||void 0===pr?void 0:pr.map(e=>e.value),gr=Object(y["cloneDeep"])(br),hr=gr;var fr={props:{_EXPORT_DATAS:{type:Object,default:()=>{}}},data(){return{downBtns:(null===mr||void 0===mr?void 0:mr.btns)||[],checkAll:!1,checkedIds:hr,fileName:"",timer:"",startIndex:"1",imgExport:{data:[],name:""},orderExport:{data:[],name:""},orderExportObj:{}}},computed:{},methods:{onOk(){this._EXPORT_DATAS.allOrderCodes?(this.timer=Za(),this.exportImg(this._EXPORT_DATAS.flatDataSource),this.exportOrders(this._EXPORT_DATAS.doOrdersDataSource),this.$message.success("导出成功，快去下载")):this.$message.error("请先导入数据")},exportOrders(){this.orderExportObj=cr(this._EXPORT_DATAS.doOrdersDataSource,this.startIndex)},exportImg(){this.imgExport.data=ar(this._EXPORT_DATAS.flatDataSource),this.imgExport.name=`${this.fileName||""}报货-${this.timer}.xlsx`},exportSn(){if(!this._EXPORT_DATAS.allOrderCodes)return;const e=qa(this._EXPORT_DATAS.allOrderCodes),t=new Blob([e],{type:"text/plain;charset=utf-8"}),a=`${this.fileName||""}单号-${this.timer}.txt`;Object(Te["saveAs"])(t,""+a)},handleCheckAll(e){this.checkedIds=e?br:[],this.isIndeterminate=!1},handleChange(e){let t=e.length;this.checkAll=t===this.datas.length,this.isIndeterminate=t>0&&t<this.datas.length},empty(){this.orderExportObj={},this.orderExport.data=[],this.orderExport.name="",this.imgExport.data=[],this.imgExport.name=""}}},yr=fr,_r=(a("a6cc"),Object(o["a"])(yr,Ka,Va,!1,null,"4c58ce33",null)),vr=_r.exports,xr=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisible,title:"配置信息",width:"70%",height:"500px","before-close":e.onCancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-tabs",{staticClass:"demo-dynamic",attrs:{value:"customized"},on:{"tab-click":e.handleClick}},[t("el-tab-pane",{attrs:{label:`定制：需联系买家规格（${e.formData.rgSpec.length}）`,name:"customized"}},[t("SpecTable",{attrs:{data:e.formData.rgSpec},on:{submit:e.customizedSubmit}})],1),t("el-tab-pane",{attrs:{label:`不定制（${e.formData.ndzSpec.length}）`,name:"noCustomized"}},[t("SpecTable",{attrs:{data:e.formData.ndzSpec},on:{submit:e.noCustomizedSubmit}})],1),t("el-tab-pane",{attrs:{label:"规格",name:"btns"}},e._l(e.formData.btns,(function(a){return t("div",{key:a.value},[t("p",[e._v(e._s(a.label))])])})),0)],1)],1)},Sr=[],Dr=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"400"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t("el-table-column",{attrs:{prop:"value",label:"英文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入英文规格"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.value))])]}}])}),t("el-table-column",{attrs:{prop:"label",label:"中文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入中文规格"},model:{value:a.row.label,callback:function(t){e.$set(a.row,"label",t)},expression:"scope.row.label"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.label))])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isEdit?a.row.isEdit?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!1)}}},[e._v("完成")]):e._e():t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!0)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.del(a)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"add-list"},[t("el-button",{attrs:{type:"info",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增")]),t("el-button",{staticStyle:{"margin-left":"20%"},attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1)],1)},Or=[],Cr={props:["data"],watch:{data:{handler:"initData",immediate:!0}},data(){return{tableData:[]}},methods:{initData(e){this.tableData=e},submit(){const e=this.tableData.map(e=>{if(!Object(y["isEmpty"])(e.label)||!Object(y["isEmpty"])(e.value))return{label:e.label.trim(),value:e.value.trim()};this.$message.error("规则信息不能为空!")});console.log(e,"--_tableData"),this.$emit("submit",e)},add(){this.defaultState(),this.tableData.push({label:"",value:"",isEdit:!0}),setTimeout(()=>{this.$refs.table.bodyWrapper.scrollTop=9999},500)},edit(e,t){this.defaultState(),this.$set(this.tableData,e.$index,{...e.row,isEdit:t})},del(e){this.tableData.splice(e.$index,1)},defaultState(){this.tableData=this.tableData.map(e=>({...e,isEdit:!1}))}}},kr=Cr,wr=(a("39d2"),Object(o["a"])(kr,Dr,Or,!1,null,"9e297582",null)),Ar=wr.exports;const Er=JSON.parse(window.localStorage.getItem("__sys3-base"))||{};console.log(Object(y["isEmpty"])(Er)?Ra:Er.btns,44454);var zr={components:{SpecTable:Ar},props:["dialogVisible"],data(){return{formData:{ndzSpec:Object(y["isEmpty"])(Er)?$a:Er.ndzSpec,rgSpec:Object(y["isEmpty"])(Er)?Na:Er.rgSpec,money:Object(y["isEmpty"])(Er)?Ia:Er.money,btns:Object(y["isEmpty"])(Er)?Ra:Er.btns}}},methods:{handleClick(e,t){},onCancel(){this.$emit("onCancel")},customizedSubmit(e){console.log("查看定制规则======",e),this.formData.rgSpec=e,this.specLocalData()},noCustomizedSubmit(e){console.log("查看不定制规则======",e),this.formData.ndzSpec=e,this.specLocalData()},specLocalData(){const e=Object(y["findIndex"])(Ra,["value","sys3-examine_hasRemark"]);this.formData.btns[e].specs=this.getKeys(this.formData.rgSpec);const t=Object(y["findIndex"])(Ra,["value","sys3-noCustomized"]);this.formData.btns[t].specs=this.getKeys(this.formData.ndzSpec),window.localStorage.setItem("__sys3-base",JSON.stringify(this.formData)),this.$message.success("配置成功")},getKeys(e){return e.map(e=>e.value)}}},jr=zr,Nr=(a("92dd"),Object(o["a"])(jr,xr,Sr,!1,null,"784faacb",null)),$r=Nr.exports;const Ir=JSON.parse(window.localStorage.getItem("__sys3-base")),Lr=null===Ir||void 0===Ir?void 0:Ir.btns,Rr=({orderDataSource:e})=>{const t=[],a=[],r=[],s=[],n=[];return e.map(e=>{const o=Ba(),i=t.indexOf(e.buyerAccount);-1===i?(t.push(e.buyerAccount),r.push(e.orderCode)):(a.push(e.buyerAccount),s.push(r[i]),s.push(e.orderCode),n.push({code:r[i],sBuyColor:o}),n.push({code:e.orderCode,sBuyColor:o}),t.splice(i,1),r.splice(i,1))}),{moreCodesAndColor:Object(y["uniqBy"])(n,"code"),buyMoreOrderCodes:Object(y["uniq"])(s)}},Tr=({orderDataSource:e})=>{const t=({key:e,orderDataSource:t})=>{const a=Object(y["find"])(Lr,["value",e]),r=a.specs,s=[];return t.map(e=>{const t=Object(y["map"])(e.goodsList,"spec"),a=Object(y["uniq"])(t);let n=!Object(y["some"])(a,(function(e){return!Object(y["includes"])(r,e)}));n&&s.push(e.orderCode)}),s},a=t({key:"sys3-noCustomized",orderDataSource:e});return{noCustOrderCodes:Object(y["uniq"])(a)}},Br=({orderDataSource:e})=>{const t=({orderDataSource:e})=>{const t=Object(y["map"])(null===Ir||void 0===Ir?void 0:Ir.rgSpec,"value"),a=[];return e.map(e=>{const r=Object(y["map"])(e.goodsList,"spec"),s=Object(y["uniq"])(r);let n=Object(y["every"])(s,(function(e){return!Object(y["includes"])(t,e)}));n&&a.push(e.orderCode)}),a},a=t({orderDataSource:e});return{custDefaultOrderCodes:Object(y["uniq"])(a)}},Pr=({orderDataSource:e})=>{const t=[];return e.map(e=>{e.orderRemark&&t.push(e.orderCode)}),{examineHasRemarkCodes:Object(y["uniq"])(t)}},Ur=(JSON.parse(window.localStorage.getItem("__sys3-base")),e=>{const t=Object(y["cloneDeep"])(e),{moreCodesAndColor:a}=Rr({orderDataSource:t.orderDataSource}),r=Xr({codeColorArrs:a,_DATA_OBJ:t}),{noCustOrderCodes:s}=Tr({orderDataSource:t.orderDataSource}),n=Jr({codeArrs:s,_DATA_OBJ:t}),{custDefaultOrderCodes:o}=Br({orderDataSource:t.orderDataSource}),i=Jr({codeArrs:o,_DATA_OBJ:t}),{examineHasRemarkCodes:l}=Pr({orderDataSource:t.orderDataSource}),c=Jr({codeArrs:l,_DATA_OBJ:t}),d=t.orderDataSource,u={doOrdersDataSource:{_sameBuyerDataSource:r,_customizedDataSource_default:i,_nocustomizedDataSource:n,_examineDataSource_hasRemark:c,_examineDataSource:d},flatDataSource:t.flatDataSource,allOrderCodes:t.allOrderCodes};return u}),Jr=({codeArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(y["findIndex"])(t.orderDataSource,["orderCode",e]);-1!==r&&(a.push(t.orderDataSource[r]),t.orderDataSource.splice(r,1))}),a},Xr=({codeColorArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(y["findIndex"])(t.orderDataSource,["orderCode",e.code]);if(-1!==r){const s=t.orderDataSource[r];s.goodsList=s.goodsList.map(t=>({...t,sBuyColor:e.sBuyColor})),a.push(s),t.orderDataSource.splice(r,1)}}),a},Mr={flatDataSource:[{orderCode:"1662292138481449087671",size:"L",spec:"With name and number",number:1,imgUrl:"//img.fantaskycdn.com/071189fa405227d3de495d51e8adc8ab_100x.jpeg",orderRemark:"Hagi #10",buyerAccount:"sunky96@yahoo.com",buyerEmail:"sunky96@yahoo.com",buyerLiuyan:"留言"},{orderCode:"1395991138489286152387",size:"M",spec:"No",number:1,imgUrl:"//img.fantaskycdn.com/aaebeb7633faff6e99276e32e9880b5c_100x.jpeg",orderRemark:"",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:""},{orderCode:"1395991138489286152387",size:"M",spec:"No",number:1,imgUrl:"//img.fantaskycdn.com/1eeacaaef4316da28d489bd67eb0e0ee_100x.jpeg",orderRemark:"",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:""},{orderCode:"1395991138489286152387",size:"L",spec:"Other(Add In The Instruction)",number:1,imgUrl:"//img.fantaskycdn.com/03d7b847393bba665fe6ffc5ff6623a7_100x.png",orderRemark:"",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:""},{orderCode:"1395991138583510800288",size:"S",spec:"No",number:1,imgUrl:"//img.fantaskycdn.com/03d7b847393bba665fe6ffc5ff6623a7_100x.png",orderRemark:"",buyerAccount:"m.kanji1@icloud.com",buyerEmail:"m.kanji1@icloud.com",buyerLiuyan:"留言"},{orderCode:"1395991138583510800288",size:"S",spec:"No",number:1,imgUrl:"//img.fantaskycdn.com/67677fcf7226a7c58409459742ceb9e6_100x.jpeg",orderRemark:"",buyerAccount:"m.kanji1@icloud.com",buyerEmail:"m.kanji1@icloud.com",buyerLiuyan:""},{orderCode:"1395991138623663291000",size:"L",spec:"Rüdiger #22",number:2,imgUrl:"//img.fantaskycdn.com/c00ff0a1f92bd0e2bbaf1a0c7718423d_100x.jpeg",orderRemark:"备注",buyerAccount:"andreas_krell@web.de",buyerEmail:"andreas_krell@web.de",buyerLiuyan:""}],orderDataSource:[{orderCode:"1662292138481449087671",buyerAccount:"sunky96@yahoo.com",orderRemark:"Hagi #10",goodsList:[{textColor:"#57e5da",spec:"With name and number",size:"L",number:1,imgUrl:"//img.fantaskycdn.com/071189fa405227d3de495d51e8adc8ab_100x.jpeg",orderCode:"1662292138481449087671",buyerAccount:"sunky96@yahoo.com",buyerEmail:"sunky96@yahoo.com",buyerLiuyan:"留言",orderRemark:"Hagi #10"}]},{orderCode:"1395991138489286152387",buyerAccount:"kasa_25@hotmail.com",orderRemark:"",goodsList:[{textColor:"#d595f3",spec:"No",size:"M",number:1,imgUrl:"//img.fantaskycdn.com/aaebeb7633faff6e99276e32e9880b5c_100x.jpeg",orderCode:"1395991138489286152387",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:"",orderRemark:""},{textColor:"#d595f3",spec:"No",size:"M",number:1,imgUrl:"//img.fantaskycdn.com/1eeacaaef4316da28d489bd67eb0e0ee_100x.jpeg",orderCode:"1395991138489286152387",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:"",orderRemark:""},{textColor:"#d595f3",spec:"Other(Add In The Instruction)",size:"L",number:1,imgUrl:"//img.fantaskycdn.com/03d7b847393bba665fe6ffc5ff6623a7_100x.png",orderCode:"1395991138489286152387",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:"",orderRemark:""}]},{orderCode:"1395991138583510800288",buyerAccount:"m.kanji1@icloud.com",orderRemark:"",goodsList:[{textColor:"#a659a3",spec:"No",size:"S",number:1,imgUrl:"//img.fantaskycdn.com/03d7b847393bba665fe6ffc5ff6623a7_100x.png",orderCode:"1395991138583510800288",buyerAccount:"m.kanji1@icloud.com",buyerEmail:"m.kanji1@icloud.com",buyerLiuyan:"留言",orderRemark:""},{textColor:"#a659a3",spec:"No",size:"S",number:1,imgUrl:"//img.fantaskycdn.com/67677fcf7226a7c58409459742ceb9e6_100x.jpeg",orderCode:"1395991138583510800288",buyerAccount:"m.kanji1@icloud.com",buyerEmail:"m.kanji1@icloud.com",buyerLiuyan:"",orderRemark:""}]},{orderCode:"1395991138623663291000",buyerAccount:"andreas_krell@web.de",orderRemark:"备注",goodsList:[{textColor:"#81a622",spec:"Rüdiger #22",size:"L",number:1,imgUrl:"//img.fantaskycdn.com/c00ff0a1f92bd0e2bbaf1a0c7718423d_100x.jpeg",orderCode:"1395991138623663291000",buyerAccount:"andreas_krell@web.de",buyerEmail:"andreas_krell@web.de",buyerLiuyan:"",orderRemark:"备注"},{textColor:"#81a622",spec:"Rüdiger #22",size:"L",number:1,imgUrl:"//img.fantaskycdn.com/c00ff0a1f92bd0e2bbaf1a0c7718423d_100x.jpeg",orderCode:"1395991138623663291000",buyerAccount:"andreas_krell@web.de",buyerEmail:"andreas_krell@web.de",buyerLiuyan:"",orderRemark:"备注"}]}],allOrderCodes:["1662292138481449087671","1395991138489286152387","1395991138583510800288","1395991138623663291000"]},Fr=JSON.parse(window.localStorage.getItem("__sys3-base"))||{};var Hr={name:"Home",components:{Upload:Ha,Goods:vr,Config:$r},mounted(){},data:()=>({configVisible:!!Object(y["isEmpty"])(Fr),completeDataSource:{}}),methods:{ttttest(){this.completeDataSource=Ur(Mr),console.log(this.completeDataSource,"转的数据")},getData(e){this.completeDataSource=Ur(e),this.$message({message:"汇总导入成功，快去下载",showClose:!0,type:"success",duration:1500,offset:10}),console.log(this.completeDataSource,"转的数据")},empty(){this.$refs.unploadRef.empty(),this.completeDataSource={},this.$refs.goodsRef.empty()},confCancle(){this.configVisible=!1,window.location.reload()}}},Kr=Hr,Vr=(a("8bc1"),Object(o["a"])(Kr,wa,Aa,!1,null,"73e4e7e6",null)),qr=(Vr.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"sys4-box"},[t("Config",{attrs:{dialogVisible:e.configVisible},on:{onOk:function(t){e.configVisible=!1},onCancel:e.confCancle}}),t("el-button",{staticClass:"conf-btn",on:{click:function(t){e.configVisible=!0}}},[e._v("规格金额配置")]),t("el-button",{staticClass:"empt-btn",attrs:{type:"warning"},on:{click:e.empty}},[e._v("清空全部")]),t("Upload",{ref:"unploadRef",on:{onOk:e.getData}}),"2"===e.step?t("Goods",{ref:"goodsRef",attrs:{fileName:e.fileName,startIndex:e.startIndex,_EXPORT_DATAS:e.completeDataSource}}):e._e(),t("div",{staticClass:"zdy-ipt"},[e._v(" 下载文件名: "),t("el-input",{staticStyle:{width:"240px","margin-right":"16px"},attrs:{clear:!0,size:"small",placeholder:"下载文件名"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1)],1)}),Zr=[],Gr=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"box-card"},[t("el-upload",{attrs:{action:"#","auto-upload":!1,"on-change":e.onChange,"on-remove":e.handleRemove,"file-list":e.fileList,multiple:"",accept:".xls,.xlsx"}},[e._v(" 第一步： "),t("el-button",{attrs:{type:"primary"}},[e._v("选择文件")])],1),t("div",{staticClass:"exp"},[e._v(" 第二步： "),t("el-button",{staticStyle:{width:"350px"},attrs:{type:"danger"},on:{click:e.submit}},[e._v("（选择文件"+e._s(e.fileList.length||0)+"个）-----导入-----（导入成功"+e._s(e.dataSource.length)+"个）")])],1)],1)},Wr=[];const Yr={"订单号":"orderCode","产品规格":"spec","商品尺寸":"size","产品总数":"number","商品图片网址":"imgUrl","订单备注":"orderRemark","买家账号":"buyerAccount","买家Email":"buyerEmail","买家留言":"buyerLiuyan"},Qr=[{value:"La Liga Patch",label:"西甲联赛"},{value:"UCL Patch",label:"欧洲冠军联赛"},{value:"UCL",label:"欧洲冠军联赛"},{value:"EURO 2024 Patch",label:"欧洲足球锦标赛"},{value:"Serie A Patch",label:"意大利足球甲级联赛"},{value:"America's Cup Patch",label:"南美洲杯"},{value:"EPL Patch",label:"英格兰足球超级联赛"},{value:"EPL",label:"英格兰足球超级联赛"},{value:"Bundesliga Patch",label:"德国足球甲级联赛"},{value:"Ligue 1 Patch",label:"法国足球甲级联赛"}],es=[{value:"NO",label:"不定制"},{value:"No",label:"不定制"},{value:"no",label:"不定制"},{value:"",label:"不定制"}],ts="230",as=e=>e.map(e=>e.value),rs=[{value:"sys4-sameBuyer",label:"同个买家下多个单",valKey:"_sameBuyerDataSource"},{value:"sys4-noCustomized",specs:as(es),label:"不定制",valKey:"_nocustomizedDataSource"},{value:"sys4-noCustomizedHasRemark",specs:as(es),label:"不定制+备注定制信息",valKey:"_nocustomizedDataSourceHasRemark"},{value:"sys4-examine",label:"定制",valKey:"_examineDataSource"},{value:"sys4-examineHasNoRemark",label:"定制+缺少定制信息",valKey:"_examineDataSourceHasNoRemark"}];a("5b81");const ss=JSON.parse(window.localStorage.getItem("__sys4-base")),ns=null===ss||void 0===ss?void 0:ss.patch,os=()=>{const e="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0");return e},is=e=>{e=e.replaceAll("Other(Add In The Instruction)","With name and number"),e=e.replaceAll("Custom ltems","Custom Items");const t=["Size","Specification","CUSTOM PATCH","Custom Patch","MODEL","Custom Items","Instruction"],a=[],r={},s=t.map(e=>e.toLowerCase().split(" ").map((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1)).join(""));s.forEach(e=>{r[e]=""}),t.forEach((t,r)=>{const n=e.indexOf(t);-1!==n&&a.push({keyword:s[r],index:n})}),a.sort((e,t)=>e.index-t.index);for(let n=0;n<a.length;n++){const o=a[n],i=n+1<a.length?a[n+1].index:e.length;let l=e.slice(o.index+t[s.indexOf(o.keyword)].length,i).trim();l=l.replace(":",""),r[o.keyword]=l}return r},ls=e=>{if(!e||"NO"===e||"No"===e||"no"===e)return"";if(ss.isPathUseEN){let t="";const a=Object(y["findIndex"])(ns,["value",e]);return t=-1===a?e:ns[a].label,t}return e},cs=e=>"Suit"===e||"suit"===e?"套装":"Jacket"===e||"jacket"===e?"上衣":"Shorts"===e||"shorts"===e?"裤子":e,ds=e=>"Adult"===e||"adult"===e?"大人":"Kids"===e||"kids"===e?"小孩":e;const us=e=>{const t=Object(y["some"])(e,e=>Object(y["has"])(e,"订单标识"));if(!t)return e;const a=[];return e.map(e=>{for(const t in e)"订单标识"!==t||"无标识"!==e[t]&&""!==e[t]||a.push(e)}),a},ms=e=>e.map(e=>{const t={};for(const a in e){const r=e[a],s=Yr[a];if("产品规格"===a)if(t["_cpggAllInfo"]=r,-1===r.indexOf("Size"))t["bdAndgg"]="",-1!==r.indexOf("MODEL")?(t["size"]=ds(r.replace("MODEL:","")),t["spec"]="No"):(t["size"]=null,t["spec"]=r);else{const e=is(r);t["size"]=e["size"],t["spec"]=e["customItems"],t["_customItems"]=ls(e["customPatch"]),t["_instruction"]=e["instruction"],t["_customPatch"]=ls(e["customPatch"]),"NO"!==t["spec"]&&"No"!==t["spec"]&&"no"!==t["spec"]&&""!==t["spec"]||t["_customPatch"]&&(t["spec"]="onlyHasPatch"),t["_specification"]=cs(e["specification"]),t["bdAndgg"]=t["_customPatch"]||t["_specification"]}else"商品图片网址"===a?t[s]=r.replace("_100x.","_300x."):s&&(t[s]=r)}return t}),ps=e=>{const t=Object(y["cloneDeep"])(e),a=[],r=[];t.map(e=>{const t=a.indexOf(e.orderCode),s=[],n=os();for(let a=0;a<e.number;a++)s.push({...e,textColor:n,spec:e.spec,size:e.size,number:1,imgUrl:e.imgUrl,orderCode:e.orderCode,buyerAccount:e.buyerAccount,buyerEmail:e.buyerEmail,buyerLiuyan:e.buyerLiuyan,orderRemark:e.orderRemark});if(-1===t){a.push(e.orderCode);const t={orderCode:e.orderCode,amount:e.amount,buyerAccount:e.buyerAccount,orderRemark:e.orderRemark};r.push({...t,goodsList:s})}else{let e=r[t].goodsList.concat(s);e=e.map(e=>({...e,textColor:n})),r[t].goodsList=e}});const s={flatDataSource:t,orderDataSource:r,allOrderCodes:a};return s},bs=a("25ca"),gs=JSON.parse(window.localStorage.getItem("__sys4-base"))||{};var hs={data(){return{fileList:[],dataSource:[]}},methods:{handleRemove(e,t){this.fileList=t},onChange(e,t){this.fileList=t},empty(){this.fileList=[],this.dataSource=[]},async submit(){this.dataSource=[],await this.fileList.map(e=>{this.readerFiles(e)}),setTimeout(()=>{this.getFlatDataSource()},500)},async readerFiles(e){let t=await new Promise(t=>{let a=new FileReader;a.readAsBinaryString(e.raw),a.onload=e=>{t(e.target.result)}}),a=bs.read(t,{type:"binary",cellDates:!0}),r=a.Sheets[a.SheetNames[0]];this.getHeaderRow(r);const s=bs.utils.sheet_to_json(r);this.dataSource.push(s)},getHeaderRow(e){const t=[],a=bs.utils.decode_range(e["!ref"]);let r;const s=a.s.r;for(r=a.s.c;r<=a.e.c;++r){const a=e[bs.utils.encode_cell({c:r,r:s})];let n="UNKNOWN "+r;a&&a.t&&(n=bs.utils.format_cell(a)),t.push(n)}return t},setOneArrFormat(){const e=this.dataSource.reduce((e,t)=>e.concat(t),[]);return e},getFlatDataSource(){if(0===this.dataSource.length)return void this.$message.error("请先导入数据");let e=this.setOneArrFormat();gs.isFilterJZCL&&(e=us(e));const t=ms(e),a=ps(t);return console.log("结果》》》》》",a),this.$emit("onOk",a),a}}},fs=hs,ys=(a("c153"),Object(o["a"])(fs,Gr,Wr,!1,null,"4dbe60d7",null)),_s=ys.exports,vs=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"main-btn"},[e._v(" 第三步："),t("el-button",{staticClass:"main-btn1",staticStyle:{color:"#000000","font-weight":"bolder","font-size":"16px"},attrs:{type:"success"},on:{click:e.onOk}},[e._v(e._s(e.buttonText))])],1),t("el-divider"),e._v(" 第四步： "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"order-sn",attrs:{size:"small",type:"info"},on:{click:e.exportSn}},[t("i",{staticClass:"el-icon-download"}),e._v("单号汇总")]),t("download-excel",{ref:"download-img",class:["export-img img"],attrs:{data:e.imgExport.data||[],name:e.imgExport.name}},[t("i",{staticClass:"el-icon-download"}),e._v("下载img ")]),t("div",{staticClass:"line"}),e._l(e.downBtns,(function(a){return t("span",{key:a.value},[t("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:a.startIdx,callback:function(t){e.$set(a,"startIdx",t)},expression:"item.startIdx"}}),t("download-excel",{ref:"download",refInFor:!0,class:["export-img doOrder"],attrs:{data:e.orderExportObj[a.valKey]||[],name:`${e.fileName}做单--${a.label}-${e.timer}.xlsx`}},[t("i",{staticClass:"el-icon-download"}),e._v(" "+e._s(a.label)+" "),e._EXPORT_DATAS.doOrdersDataSource?t("span",[e._v(" （"+e._s(e._EXPORT_DATAS.doOrdersDataSource[a.valKey].length>0?e._EXPORT_DATAS.doOrdersDataSource[a.valKey].length:"无")+"） ")]):e._e()])],1)}))],2)],1)},xs=[];const Ss=e=>{const t=Object(y["chunk"])(e,4);let a="";return t.map(e=>{a=a+e.join(" ")+"\r\n"}),a},Ds=()=>{const e=new Date,t=e.getMonth()+1,a=t<10?"0"+t:t;let r=e.getFullYear()+"-"+a+"-"+e.getDate();return r},Os="<table>\n<tr >\n    <td></td>\n    </table>",Cs=({img:e,specStr:t})=>`<table border="1"  align="center" bgcolor="#e5e9f2">  \n    <tr align="center" valign="center">\n        <td  height=200 width=200  align="center" valign="center"> <img src="https:${e}" width="160" height="160" /></td>\n    </tr>\n    <tr align="center">\n        <td width="200">${t}</td>\n    </tr>       \n</table>`,ks='<table  align="center" >\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n</table>'+Os,ws='<table  align="center" >\n<colgroup>\n    <col span="1"style="">\n  </colgroup>\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n</table>'+Os,As=e=>{Ds();return`<table border="1"  align="center" >\n    <colgroup>\n        <col span="1"style="">\n      </colgroup>\n    <tr align="center" valign="center">\n        <td  height=200 width=200  align="center" valign="center"  style="color:#fd0004;font-size: 72px;">${e}</td>\n    </tr>\n    <tr align="center">\n        <td>买家</td>\n    </tr>\n    <tr align="center">\n        <td>购买选项</td>\n    </tr>\n    <tr align="center">\n        <td>客户备注定制</td>\n    </tr>\n    <tr align="center">\n        <td>补丁/规格</td>\n    </tr>\n    <tr align="center">\n        <td>尺寸</td>\n    </tr>\n    <tr align="center">\n        <td>订单号</td>\n    </tr>\n    <tr align="center">\n    <td>订单备注</td>\n</tr>\n</table>`},Es=({textColor:e,img:t,bdAndgg:a,_instruction:r,DZnumber:s,business:n,buyerEmail:o,spec:i,size:l,order_sn:c,orderRemark:d,sBuyColor:u=""})=>`<table border="1"  align="center"  bgcolor="#e5e9f2">\n        <colgroup>\n            <col span="1"style="">\n          </colgroup>\n        <tr align="center" valign="center">\n            <td  height=200 width=200  align="center" valign="center"> <img src="https:${t}" height="160" /></td>\n        </tr>\n        <tr align="center">\n            <td  style="background-color:${u||e}">${n}</td>\n        </tr>\n        <tr align="center">\n            <td  >${i}</td>\n        </tr>\n         <tr align="center">\n            <td style="color:green">${r}</td>\n        </tr>\n        <tr align="center">\n            <td >${a}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:red">${l}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:${u?e:"blue"}">${"&nbsp;"+c}</td>\n        </tr>\n        <tr align="center">\n        <td>${d}</td>\n    </tr>\n    </table>`,zs=e=>{const t=Is(e),a=Object(y["flatten"])($s(t)),r=js(a);return r},js=e=>{const t=Object(y["chunk"])(e,4),a=[];return t.map(e=>{let t={};e.map((e,a)=>{const r=Object(y["map"])(e.sizeNum,"size_num_str").join("/");t["picture-picture-picture"+a]=Cs({img:e.imgUrl,specStr:r}),t[`empty${a}-`]=ks}),a.push(t)}),a},Ns=["S","M","L","XL","XXL","XXXL","12","14","16","18","20","22","24","26","28","30"],$s=e=>e.map(e=>{const t=e.sizeNum.sort((e,t)=>Ns.indexOf(e.size)-Ns.indexOf(t.size));return{imgUrl:e.imgUrl,sizeNum:t}}),Is=e=>{const t=[];return e.map(e=>{const a=e.imgUrl,r=Object(y["findIndex"])(t,["imgUrl",a]),s=e.size,n=e.number;if(-1===r){const e=Rs(s,n),r={imgUrl:a,sizeNum:[e]};t.push(r)}else Ls(t[r],{size:s,number:n})}),t},Ls=(e,{size:t,number:a})=>{const r=Object(y["findIndex"])(e.sizeNum,["size",t]);if(-1===r){const r=Rs(t,a);e.sizeNum.push(r)}else e.sizeNum[r].number+=a,e.sizeNum[r].size_num_str=t+e.sizeNum[r].number},Rs=(e,t)=>({size:e,number:t,size_num_str:e+t}),Ts=(e,t)=>{const{_sameBuyerDataSource:a,_nocustomizedDataSource:r,_examineDataSource:s,_nocustomizedDataSourceHasRemark:n,_examineDataSourceHasNoRemark:o}=e;let i=1;const l=Object(y["find"])(t,["valKey","_sameBuyerDataSource"]);Object(y["isEmpty"])(l)||(i=l["startIdx"]);const c=Object(y["find"])(t,["valKey","_nocustomizedDataSource"])["startIdx"]||1,d=Object(y["find"])(t,["valKey","_nocustomizedDataSourceHasRemark"])["startIdx"]||1,u=Object(y["find"])(t,["valKey","_examineDataSourceHasNoRemark"])["startIdx"]||1,m=Object(y["find"])(t,["valKey","_examineDataSource"])["startIdx"]||1,p={_sameBuyerDataSource:Us(Bs(a),i),_nocustomizedDataSource:Us(Bs(r),c),_nocustomizedDataSourceHasRemark:Us(Bs(n),d),_examineDataSourceHasNoRemark:Us(Bs(o),u),_examineDataSource:Us(Bs(s),m)};return p},Bs=e=>{const t=null===e||void 0===e?void 0:e.map(e=>e.goodsList);return Object(y["flatten"])(t)},Ps=e=>"NO"===e||"No"===e||"no"===e||"onlyHasPatch"===e?"":e,Us=(e,t)=>{const a=Object(y["chunk"])(e,4),r=[];return a.map((e,a)=>{let s={left:As(t)};e.map((e,t)=>{s["data"+t]=Es({textColor:e.textColor,img:e.imgUrl,DZbuyName:"",DZnumber:"",bdAndgg:e.bdAndgg||"",_instruction:e._instruction||"",business:e.buyerAccount,spec:Ps(e.spec),size:e.size,order_sn:e.orderCode,sBuyColor:e.sBuyColor||"",buyerEmail:e.buyerEmail,orderRemark:e.orderRemark}),s[`empty${t}-`]=ws}),r.push(s),t++}),r},Js=JSON.parse(window.localStorage.getItem("__sys4-base")),Xs=Object(y["cloneDeep"])(null===Js||void 0===Js?void 0:Js.btns),Ms=null===Xs||void 0===Xs?void 0:Xs.map(e=>e.value),Fs=Object(y["cloneDeep"])(Ms),Hs=Fs;var Ks={props:{fileName:{type:String,default:""},startIndex:{type:String,default:"1"},_EXPORT_DATAS:{type:Object,default:()=>{}}},data(){return{checkAll:!1,checkedIds:Hs,buttonText:"导出excel：1、下载之前先填顺序 2、再点我生成下载数据",timer:"",imgExport:{data:[],name:""},orderExport:{data:[],name:""},orderExportObj:{},curStep:"3",downBtns:[]}},mounted(){const e=(null===Js||void 0===Js?void 0:Js.btns)||[];if(!Js["sameBuyerBUyMore"]){const t=Object(y["findIndex"])(e,["value","sys4-sameBuyer"]);-1!==t&&e.splice(t,1)}this.downBtns=e.map(e=>({...e,startIdx:"1"}))},methods:{onOk(){this._EXPORT_DATAS.allOrderCodes?(this.timer=Ds(),this.exportImg(this._EXPORT_DATAS.flatDataSource),this.exportOrders(this._EXPORT_DATAS.doOrdersDataSource),this.$message.success("导出成功，快去下载"),this.curStep="4"):this.$message.error("请先导入数据")},exportOrders(){this.orderExportObj=Ts(this._EXPORT_DATAS.doOrdersDataSource,this.downBtns)},exportImg(){this.imgExport.data=zs(this._EXPORT_DATAS.flatDataSource),this.imgExport.name=`${this.fileName||""}报货-${this.timer}.xlsx`},exportSn(){if(!this._EXPORT_DATAS.allOrderCodes)return;const e=Ss(this._EXPORT_DATAS.allOrderCodes),t=new Blob([e],{type:"text/plain;charset=utf-8"}),a=`${this.fileName||""}单号-${this.timer}.txt`;Object(Te["saveAs"])(t,""+a)},handleCheckAll(e){this.checkedIds=e?Ms:[],this.isIndeterminate=!1},handleChange(e){let t=e.length;this.checkAll=t===this.datas.length,this.isIndeterminate=t>0&&t<this.datas.length},empty(){this.orderExportObj={},this.orderExport.data=[],this.orderExport.name="",this.imgExport.data=[],this.imgExport.name="",this.curStep="3"}}},Vs=Ks,qs=(a("823b"),Object(o["a"])(Vs,vs,xs,!1,null,"5b4c5774",null)),Zs=qs.exports,Gs=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisible,title:"配置信息",width:"70%",height:"500px","before-close":e.onCancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-tabs",{staticClass:"demo-dynamic",attrs:{value:"customized"},on:{"tab-click":e.handleClick}},[t("el-tab-pane",{attrs:{label:`补丁（${e.formData.patch.length}）`,name:"customized"}},[t("SpecTable",{attrs:{data:e.formData.patch},on:{submit:e.customizedSubmit}})],1),t("el-tab-pane",{attrs:{label:`不定制（${e.formData.ndzSpec.length}）`,name:"noCustomized"}},[t("SpecTable",{attrs:{data:e.formData.ndzSpec},on:{submit:e.noCustomizedSubmit}})],1),t("el-tab-pane",{attrs:{label:"规格",name:"btns"}},e._l(e.formData.btns,(function(a){return t("div",{key:a.value},[t("p",[e._v(e._s(a.label))])])})),0),t("el-tab-pane",{attrs:{label:"其他",name:"orther"}},[t("p",[t("span",[e._v("是否过滤禁止处理订单：")]),t("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.formData.isFilterJZCL,callback:function(t){e.$set(e.formData,"isFilterJZCL",t)},expression:"formData.isFilterJZCL"}})],1),t("p",[t("span",[e._v("是否开启同个买家购买多件：")]),t("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.formData.sameBuyerBUyMore,callback:function(t){e.$set(e.formData,"sameBuyerBUyMore",t)},expression:"formData.sameBuyerBUyMore"}})],1),t("p",[t("span",[e._v("补丁是否使用中文：")]),t("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.formData.isPathUseEN,callback:function(t){e.$set(e.formData,"isPathUseEN",t)},expression:"formData.isPathUseEN"}})],1),t("el-button",{staticStyle:{"margin-left":"20%","margin-bottom":"34px"},attrs:{type:"primary"},on:{click:function(t){return e.submit3()}}},[e._v("保存")]),t("img",{staticClass:"imgSize",attrs:{src:a("94f3"),alt:"Dynamic Image"}})],1),t("el-tab-pane",{attrs:{label:"使用教程",name:"step"}},[t("p",[e._v("小秘配置选项：9个 ")]),t("el-alert",{staticClass:"stepT",staticStyle:{"margin-bottom":"20px"},attrs:{title:"订单号、产品规格、商品图片网址、产品总数、订单备注、买家账号、买家Email、买家留言、订单标识",type:"error",closable:!1}}),t("img",{staticClass:"imgSize",attrs:{src:a("c9c6"),alt:"Dynamic Image"}}),t("img",{staticClass:"imgSize",attrs:{src:a("266d"),alt:"Dynamic Image"}}),t("img",{staticClass:"imgSize",attrs:{src:a("336e"),alt:"Dynamic Image"}}),t("img",{staticClass:"imgSize",attrs:{src:a("2a59"),alt:"Dynamic Image"}}),t("img",{staticClass:"imgSize",attrs:{src:a("dcb7"),alt:"Dynamic Image"}}),t("img",{staticClass:"imgSize",attrs:{src:a("9b01"),alt:"Dynamic Image"}}),t("img",{staticClass:"imgSize",attrs:{src:a("a3e5"),alt:"Dynamic Image"}}),t("img",{staticClass:"imgSize",attrs:{src:a("af91"),alt:"Dynamic Image"}}),t("img",{staticClass:"imgSize",attrs:{src:a("c5a8"),alt:"Dynamic Image"}}),t("el-alert",{attrs:{title:"其他流程也可以看：",type:"info",closable:!1}}),t("img",{staticClass:"imgSize",attrs:{src:a("8ee1"),alt:"Dynamic Image"}}),t("img",{staticClass:"imgSize",attrs:{src:a("fc83"),alt:"Dynamic Image"}})],1)],1)],1)},Ws=[],Ys=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"400"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t("el-table-column",{attrs:{prop:"value",label:"英文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入英文规格"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.value))])]}}])}),t("el-table-column",{attrs:{prop:"label",label:"中文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入中文规格"},model:{value:a.row.label,callback:function(t){e.$set(a.row,"label",t)},expression:"scope.row.label"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.label))])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isEdit?a.row.isEdit?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!1)}}},[e._v("完成")]):e._e():t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!0)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.del(a)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"add-list"},[t("el-button",{attrs:{type:"info",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增")]),t("el-button",{staticStyle:{"margin-left":"20%"},attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1)],1)},Qs=[],en={props:["data"],watch:{data:{handler:"initData",immediate:!0}},data(){return{tableData:[]}},methods:{initData(e){this.tableData=e},submit(){const e=this.tableData.map(e=>{if(!Object(y["isEmpty"])(e.label)||!Object(y["isEmpty"])(e.value))return{label:e.label.trim(),value:e.value.trim()};this.$message.error("规则信息不能为空!")});console.log(e,"--_tableData"),this.$emit("submit",e)},add(){this.defaultState(),this.tableData.push({label:"",value:"",isEdit:!0}),setTimeout(()=>{this.$refs.table.bodyWrapper.scrollTop=9999},500)},edit(e,t){this.defaultState(),this.$set(this.tableData,e.$index,{...e.row,isEdit:t})},del(e){this.tableData.splice(e.$index,1)},defaultState(){this.tableData=this.tableData.map(e=>({...e,isEdit:!1}))}}},tn=en,an=(a("f21a"),Object(o["a"])(tn,Ys,Qs,!1,null,"2610a280",null)),rn=an.exports;const sn=JSON.parse(window.localStorage.getItem("__sys4-base"))||{};console.log(Object(y["isEmpty"])(sn)?rs:sn.btns,44454);var nn={components:{SpecTable:rn},props:["dialogVisible"],data(){return{formData:{isPathUseEN:!Object(y["isEmpty"])(sn)&&sn.isPathUseEN,sameBuyerBUyMore:!Object(y["isEmpty"])(sn)&&sn.sameBuyerBUyMore,isFilterJZCL:!Object(y["isEmpty"])(sn)&&sn.isFilterJZCL,ndzSpec:Object(y["isEmpty"])(sn)?es:sn.ndzSpec,patch:Object(y["isEmpty"])(sn)?Qr:sn.patch,money:Object(y["isEmpty"])(sn)?ts:sn.money,btns:Object(y["isEmpty"])(sn)?rs:sn.btns}}},methods:{handleClick(e,t){},onCancel(){this.$emit("onCancel")},customizedSubmit(e){console.log("查看定制规则======",e),this.formData.patch=e,this.specLocalData()},noCustomizedSubmit(e){console.log("查看不定制规则======",e),this.formData.ndzSpec=e,this.specLocalData()},specLocalData(){const e=Object(y["findIndex"])(rs,["value","sys4-noCustomized"]);this.formData.btns[e].specs=this.getKeys(this.formData.ndzSpec),window.localStorage.setItem("__sys4-base",JSON.stringify(this.formData)),this.$message.success("配置成功")},getKeys(e){return e.map(e=>e.value)},submit3(){window.localStorage.setItem("__sys4-base",JSON.stringify(this.formData)),this.$message.success("配置成功")}}},on=nn,ln=(a("6b84"),Object(o["a"])(on,Gs,Ws,!1,null,"1e56aa89",null)),cn=ln.exports;const dn=JSON.parse(window.localStorage.getItem("__sys4-base")),un=null===dn||void 0===dn?void 0:dn.btns,mn=({orderDataSource:e})=>{const t=[],a=[],r=[],s=[],n=[];return e.map(e=>{const o=os(),i=t.indexOf(e.buyerAccount);-1===i?(t.push(e.buyerAccount),r.push(e.orderCode)):(a.push(e.buyerAccount),s.push(r[i]),s.push(e.orderCode),n.push({code:r[i],sBuyColor:o}),n.push({code:e.orderCode,sBuyColor:o}),t.splice(i,1),r.splice(i,1))}),{moreCodesAndColor:Object(y["uniqBy"])(n,"code"),buyMoreOrderCodes:Object(y["uniq"])(s)}},pn=({orderDataSource:e})=>{const t=({key:e,orderDataSource:t})=>{const a=Object(y["find"])(un,["value",e]),r=a.specs,s=[],n=[];return t.map(e=>{const t=Object(y["map"])(e.goodsList,"spec"),a=Object(y["uniq"])(t);let o=!Object(y["some"])(a,(function(e){return!Object(y["includes"])(r,e)}));const i=Object(y["compact"])(Object(y["uniq"])(Object(y["map"])(e.goodsList,"_instruction")));o&&(i.length>0?n.push(e.orderCode):s.push(e.orderCode))}),{orderCode:s,_instructionOrderCode:n}},a=t({key:"sys4-noCustomized",orderDataSource:e});return{noCustOrderCodes:Object(y["uniq"])(a.orderCode),noCustOrderCodesHasRemark:Object(y["uniq"])(a._instructionOrderCode)}},bn=({orderDataSource:e})=>{const t=[];return e.map(e=>{const a=Object(y["some"])(e.goodsList,e=>{const t=Object(y["toLower"])(e.spec);return"no"!==t&&""!==t}),r=Object(y["some"])(e.goodsList,e=>Object(y["has"])(e,"_instruction")&&!Object(y["isEmpty"])(e["_instruction"]));e.orderRemark||r||a||t.push(e.orderCode)}),{examineHasNoRemarkCodes:Object(y["uniq"])(t)}},gn=JSON.parse(window.localStorage.getItem("__sys4-base")),hn=e=>{const t=Object(y["cloneDeep"])(e);let a=[];if(gn["sameBuyerBUyMore"]){const{moreCodesAndColor:e}=mn({orderDataSource:t.orderDataSource});a=yn({codeColorArrs:e,_DATA_OBJ:t})}const{noCustOrderCodes:r,noCustOrderCodesHasRemark:s}=pn({orderDataSource:t.orderDataSource}),n=fn({codeArrs:r,_DATA_OBJ:t}),o=fn({codeArrs:s,_DATA_OBJ:t}),{examineHasNoRemarkCodes:i}=bn({orderDataSource:t.orderDataSource}),l=fn({codeArrs:i,_DATA_OBJ:t}),c=t.orderDataSource,d={doOrdersDataSource:{_sameBuyerDataSource:a,_nocustomizedDataSource:n,_nocustomizedDataSourceHasRemark:o,_examineDataSource:c,_examineDataSourceHasNoRemark:l},flatDataSource:t.flatDataSource,allOrderCodes:t.allOrderCodes};return d},fn=({codeArrs:e,_DATA_OBJ:t})=>{const a=[];return null===e||void 0===e||e.map(e=>{const r=Object(y["findIndex"])(t.orderDataSource,["orderCode",e]);-1!==r&&(a.push(t.orderDataSource[r]),t.orderDataSource.splice(r,1))}),a},yn=({codeColorArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(y["findIndex"])(t.orderDataSource,["orderCode",e.code]);if(-1!==r){const s=t.orderDataSource[r];s.goodsList=s.goodsList.map(t=>({...t,sBuyColor:e.sBuyColor})),a.push(s),t.orderDataSource.splice(r,1)}}),a},_n=JSON.parse(window.localStorage.getItem("__sys4-base"))||{};var vn={name:"Home",components:{Upload:_s,Goods:Zs,Config:cn},mounted(){},data:()=>({configVisible:!!Object(y["isEmpty"])(_n),completeDataSource:{},step:"1",fileName:"",startIndex:"1"}),methods:{getData(e){this.completeDataSource=hn(e),this.$message({message:"汇总导入成功，快去下载",showClose:!0,type:"success",duration:1500,offset:10}),this.step="2",console.log(this.completeDataSource,"转的数据")},empty(){this.$refs.unploadRef.empty(),this.completeDataSource={},this.$refs.goodsRef.empty(),this.step="1"},confCancle(){this.configVisible=!1,window.location.reload()}}},xn=vn,Sn=(a("34ae"),Object(o["a"])(xn,qr,Zr,!1,null,"34f8b1dc",null)),Dn=Sn.exports,On={name:"Home",components:{Lock:ot,Sys4Home:Dn},mounted(){},data:()=>({islock:sessionStorage.getItem("isShopLock"),activeName:"first"}),methods:{login(e){this.islock=e},handleClick(){}}},Cn=On,kn=(a("2169"),Object(o["a"])(Cn,m,p,!1,null,"567668b2",null)),wn=kn.exports;r["default"].use(u["a"]);const An=[{path:"/",name:"Home",component:wn},{path:"/order",name:"Order",component:et}],En=new u["a"]({mode:"hash",base:"",routes:An});var zn=En,jn=a("2f62");r["default"].use(jn["a"]);var Nn=new jn["a"].Store({state:{},mutations:{},actions:{},modules:{}}),$n=(a("0fae"),a("5c96")),In=a("f2d9");r["default"].config.productionTip=!1,r["default"].use($n["Input"]),r["default"].use($n["Button"]),r["default"].use($n["Form"]),r["default"].use($n["FormItem"]),r["default"].use($n["Col"]),r["default"].use($n["Row"]),r["default"].use($n["Dialog"]),r["default"].use($n["Checkbox"]),r["default"].use($n["CheckboxGroup"]),r["default"].use($n["Upload"]),r["default"].use($n["Tabs"]),r["default"].use($n["Divider"]),r["default"].use($n["TabPane"]),r["default"].use($n["Table"]),r["default"].use($n["TableColumn"]),r["default"].use($n["Card"]),r["default"].use($n["Switch"]),r["default"].use($n["Alert"]),r["default"].prototype.$message=$n["Message"],r["default"].component("downloadExcel",In["a"]),new r["default"]({router:zn,store:Nn,render:e=>e(c)}).$mount("#app")},"5a1a":function(e,t,a){"use strict";a("6205")},"5b20":function(e,t,a){},"5e03":function(e,t,a){"use strict";a("9f4b")},"5e98":function(e,t,a){"use strict";a("0762")},6205:function(e,t,a){},"6b84":function(e,t,a){"use strict";a("3f91")},"6e3e":function(e,t,a){"use strict";a("4477")},"7cee":function(e,t,a){"use strict";a("ea73")},"823b":function(e,t,a){"use strict";a("b727")},8385:function(e,t,a){},"84f4":function(e,t,a){},"8b15":function(e,t,a){},"8bc1":function(e,t,a){"use strict";a("8b15")},"8d0e":function(e,t,a){},"8ee1":function(e,t,a){e.exports=a.p+"img/image10.3f385398.png"},"92dd":function(e,t,a){"use strict";a("1405")},"94f3":function(e,t,a){e.exports=a.p+"img/image11.c89758bd.png"},9741:function(e,t,a){},"9b01":function(e,t,a){e.exports=a.p+"img/image3.8f1bf38a.png"},"9e78":function(e,t,a){"use strict";a("e958")},"9f4b":function(e,t,a){},a3e5:function(e,t,a){e.exports=a.p+"img/image4.fac3c4e6.png"},a6cc:function(e,t,a){"use strict";a("3e30")},ae85:function(e,t,a){},af91:function(e,t,a){e.exports=a.p+"img/image5.321c378b.png"},b727:function(e,t,a){},c153:function(e,t,a){"use strict";a("f6f3")},c5a8:function(e,t,a){e.exports=a.p+"img/image6.cee0cb79.png"},c9c6:function(e,t,a){e.exports=a.p+"img/image0.e662dbc7.png"},da7c:function(e,t,a){"use strict";a("9741")},dcb7:function(e,t,a){e.exports=a.p+"img/image2.f3a03e94.png"},e488:function(e,t,a){"use strict";a("3310")},e52a:function(e,t,a){"use strict";a("ae85")},e958:function(e,t,a){},ea73:function(e,t,a){},f21a:function(e,t,a){"use strict";a("84f4")},f6f3:function(e,t,a){},fc83:function(e,t,a){e.exports=a.p+"img/image10-1.ee7f15dc.png"},fcc0:function(e,t,a){"use strict";a("5b20")}});